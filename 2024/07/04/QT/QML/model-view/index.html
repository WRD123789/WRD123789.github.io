

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=light>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/bg/3.png">
  <link rel="icon" href="/img/bg/3.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Wangrd">
  <meta name="keywords" content="">
  
    <meta name="description" content="Model View 在 QML 中, 模型 (model) 和视图 (view) 由委托 (delegate) 连接. 其中模型负责提供数据项 (每个数据项可能有多个值, 例如, 电话簿中每个条目都有一个名字、一张图片和一个号码), 委托负责将数据项可视化, 视图负责安排委托.  下面是一个使用该模式的简单示例: 以联系人为例, 想要有联系人的基本数据, 需要构建一个模型, 如下所示: 1234">
<meta property="og:type" content="article">
<meta property="og:title" content="QML Model View">
<meta property="og:url" content="http://example.com/2024/07/04/QT/QML/model-view/index.html">
<meta property="og:site_name" content="Wangrd&#39;s Blog">
<meta property="og:description" content="Model View 在 QML 中, 模型 (model) 和视图 (view) 由委托 (delegate) 连接. 其中模型负责提供数据项 (每个数据项可能有多个值, 例如, 电话簿中每个条目都有一个名字、一张图片和一个号码), 委托负责将数据项可视化, 视图负责安排委托.  下面是一个使用该模式的简单示例: 以联系人为例, 想要有联系人的基本数据, 需要构建一个模型, 如下所示: 1234">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/Pictures/20240604124142.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240604130137.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240604130849.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240604133358.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240604135408.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240604135413.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240604135859.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240604141212.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240604144715.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240604151303.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240605101608.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240605102424.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240605105813.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240605125744.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240605140350.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240605140355.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614145551.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614150948.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614145939.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614151006.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614151052.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614153321.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614153600.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614154317.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614154500.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614160021.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614160458.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614161143.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240614161424.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240608123219.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240608125613.png">
<meta property="og:image" content="http://example.com/img/Pictures/20240608131240.png">
<meta property="article:published_time" content="2024-07-04T13:29:26.000Z">
<meta property="article:modified_time" content="2024-07-04T13:37:06.567Z">
<meta property="article:author" content="Wangrd">
<meta property="article:tag" content="QT">
<meta property="article:tag" content="QML">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/img/Pictures/20240604124142.png">
  
  
  
  <title>QML Model View - Wangrd&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Wangrd&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/bg/1.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="QML Model View"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-07-04 21:29" pubdate>
          2024年7月4日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          9.3k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          78 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">QML Model View</h1>
            
            
              <div class="markdown-body">
                
                <h1>Model View</h1>
<p>在 QML 中, 模型 (model) 和视图 (view) 由委托 (delegate) 连接. 其中模型负责提供数据项 (每个数据项可能有多个值, 例如, 电话簿中每个条目都有一个名字、一张图片和一个号码), 委托负责将数据项可视化, 视图负责安排委托.</p>
<p><img src="/img/Pictures/20240604124142.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>下面是一个使用该模式的简单示例:</p>
<p>以联系人为例, 想要有联系人的基本数据, 需要构建一个模型, 如下所示:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">ListModel</span> &#123;<br>    <span class="hljs-title">ListElement</span> &#123;<br>        <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Pony&quot;</span><br>        <span class="hljs-attribute">number</span>: <span class="hljs-string">&quot;10001&quot;</span><br>        <span class="hljs-attribute">portrait</span>: <span class="hljs-string">&quot;qrc:/assets/logo.jpg&quot;</span><br>    &#125;<br>    <span class="hljs-title">ListElement</span> &#123;<br>        <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Tony&quot;</span><br>        <span class="hljs-attribute">number</span>: <span class="hljs-string">&quot;10002&quot;</span><br>        <span class="hljs-attribute">portrait</span>: <span class="hljs-string">&quot;qrc:/assets/logo2.jpg&quot;</span><br>    &#125;<br>    <span class="hljs-title">ListElement</span> &#123;<br>        <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Kney&quot;</span><br>        <span class="hljs-attribute">number</span>: <span class="hljs-string">&quot;10003&quot;</span><br>        <span class="hljs-attribute">portrait</span>: <span class="hljs-string">&quot;qrc:/assets/logo3.jpg&quot;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>想要让联系人数据以 “姓名上方显示头像” 的形式呈现, 可以在委托中定义一个垂直布局:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> QtQuick.Layouts<br><br><span class="hljs-title">Item</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">100</span><br><br>    <span class="hljs-title">ColumnLayout</span> &#123;<br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-title">Item</span> &#123;<br>            <span class="hljs-attribute">Layout.fillHeight</span>: <span class="hljs-literal">true</span><br>        &#125;<br>        <span class="hljs-title">Image</span> &#123;<br>            <span class="hljs-attribute">source</span>: model.portrait  <span class="hljs-comment">// 头像</span><br>            <span class="hljs-attribute">sourceSize</span>: Qt.size(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>)<br>            <span class="hljs-attribute">Layout.alignment</span>: Qt.AlignCenter<br>        &#125;<br>        <span class="hljs-title">Text</span> &#123;<br>            <span class="hljs-attribute">text</span>: model.name        <span class="hljs-comment">// 名字</span><br>            <span class="hljs-attribute">Layout.alignment</span>: Qt.AlignCenter<br>        &#125;<br>        <span class="hljs-title">Item</span> &#123;<br>            <span class="hljs-attribute">Layout.fillHeight</span>: <span class="hljs-literal">true</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>注意到, <strong>在委托中, 可以通过 <code>model.&lt;property&gt;</code> 的形式访问模型中的数据</strong>.</p>
<p>下面通过视图将委托和模型组合起来:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">ListView</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">300</span><br><br>    <span class="hljs-attribute">model</span>: <span class="hljs-title">ContactModel</span> &#123;&#125;<br>    <span class="hljs-attribute">delegate</span>: <span class="hljs-title">IconDelegate</span> &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>通过上例, 可以看出, 委托知道模型的内容以及如何将其可视化, 视图知道委托的概念以及如何布置它们, 模型只知道它自己所表示的数据.</p>
<h2 id="重复器">重复器</h2>
<p>最基本的、可视化模型数据的方法是使用 <code>Repeater</code> 元素. <strong><code>Repeater</code> 是一种用于创建多个相似项的视图组件</strong>, 通过它我们可以灵活地控制生成的委托项及其数量, 而无需编写大量的重复代码. <code>Repeater</code> 通常被包含在定位器类型中 (如, <code>Row</code>、<code>Column</code> 等), 以直观地定位它所创建的委托项.</p>
<p><code>Repeater</code> 支持多种模型类型:</p>
<ul>
<li>数字</li>
<li>列表 (如字符串列表)</li>
<li>内置的 QML 模型 (如 <code>ListModel</code>、<code>ObjectModel</code>)</li>
<li>自定义的 C++ 模型 (如 <code>QStringList</code>、<code>QVariantList</code>)</li>
</ul>
<h3 id="数字模型">数字模型</h3>
<p><code>Repeater</code> 可以用来实例化指定数量的数据项. 每个数据项都可以访问一个附加属性 <code>index</code>, 该属性可以用于区分各个数据项.</p>
<p>在下面的示例中, 使用 <code>Repeater</code> 创建了 10 个数据项的实例. 数据项的数量由 <code>model</code> 属性控制, 它们的视觉表示由 <code>delegate</code> 属性控制. 对于模型中的每个数据项, 都会实例化一个委托 (该例中, 委托是一个 <code>BlueBox</code> 元素, 它是一个包含 <code>Text</code> 元素的自定义 <code>Rectangle</code>). 在委托中, <code>text</code> 属性设置为 <code>index</code> 值, 因此数据项编号为 0 ~ 9:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../common&quot;</span><br><br><span class="hljs-title">Column</span> &#123;<br>    <span class="hljs-attribute">spacing</span>: <span class="hljs-number">2</span><br><br>    <span class="hljs-title">Repeater</span> &#123;<br>        <span class="hljs-attribute">model</span>: <span class="hljs-number">10</span><br>        <span class="hljs-attribute">delegate</span>: <span class="hljs-title">BlueBox</span> &#123;<br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> int index</span><br>            <span class="hljs-attribute">width</span>: <span class="hljs-number">100</span><br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">32</span><br>            <span class="hljs-attribute">text</span>: index<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240604130137.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>由于 <code>delegate</code> 是 <code>Repeater</code> 的默认属性, 因此可以用以下方式编写代码:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../common&quot;</span><br><br><span class="hljs-title">Column</span> &#123;<br>    <span class="hljs-attribute">spacing</span>: <span class="hljs-number">2</span><br><br>    <span class="hljs-title">Repeater</span> &#123;<br>        <span class="hljs-attribute">model</span>: <span class="hljs-number">10</span><br><br>        <span class="hljs-title">BlueBox</span> &#123;<br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> int index</span><br>            <span class="hljs-attribute">width</span>: <span class="hljs-number">100</span><br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">32</span><br>            <span class="hljs-attribute">text</span>: index<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="列表模型">列表模型</h3>
<p>可以使用 JavaScript 的数组作为数据源. 在下例中, 使用了一个字符串列表, 我们可以使用 <code>index</code> 来访问列表中的每个数据项, 也可以使用 <code>modelData</code>, 该变量包含列表中每个数据项:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../common&quot;</span><br><br><span class="hljs-title">Column</span> &#123;<br>    <span class="hljs-attribute">spacing</span>: <span class="hljs-number">2</span><br><br>    <span class="hljs-title">Repeater</span> &#123;<br>        <span class="hljs-attribute">model</span>: [<span class="hljs-string">&quot;Enterprise&quot;</span>, <span class="hljs-string">&quot;Columbia&quot;</span>, <span class="hljs-string">&quot;Challenger&quot;</span>, <span class="hljs-string">&quot;Discovery&quot;</span>, <span class="hljs-string">&quot;Endeavour&quot;</span>, <span class="hljs-string">&quot;Atlantis&quot;</span>]<br><br>        <span class="hljs-attribute">delegate</span>: <span class="hljs-title">BlueBox</span> &#123;<br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> var modelData</span><br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> int index</span><br><br>            <span class="hljs-attribute">width</span>: <span class="hljs-number">100</span><br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">32</span><br>            <span class="hljs-attribute">radius</span>: <span class="hljs-number">3</span><br><br>            <span class="hljs-attribute">text</span>: modelData + <span class="hljs-string">&#x27; (&#x27;</span> + index + <span class="hljs-string">&#x27;)&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240604130849.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h3 id="内置-QML-模型">内置 QML 模型</h3>
<p>可以使用内置 QML 模型 <code>ListModel</code> , 它仅仅是一组 <code>ListElement</code> 元素的集合. 这些 <code>ListElement</code> 元素的属性都会被添加到每个由 <code>Repeater</code> 创建的委托实例上:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../common&quot;</span><br><br><span class="hljs-title">Column</span> &#123;<br>    <span class="hljs-attribute">spacing</span>: <span class="hljs-number">2</span><br><br>    <span class="hljs-title">Repeater</span> &#123;<br>        <span class="hljs-attribute">model</span>: <span class="hljs-title">ListModel</span> &#123;<br>            <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Mercury&quot;</span>; <span class="hljs-attribute">surfaceColor</span>: <span class="hljs-string">&quot;gray&quot;</span> &#125;<br>            <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Venus&quot;</span>; <span class="hljs-attribute">surfaceColor</span>: <span class="hljs-string">&quot;yellow&quot;</span> &#125;<br>            <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Earth&quot;</span>; <span class="hljs-attribute">surfaceColor</span>: <span class="hljs-string">&quot;blue&quot;</span> &#125;<br>            <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Mars&quot;</span>; <span class="hljs-attribute">surfaceColor</span>: <span class="hljs-string">&quot;orange&quot;</span> &#125;<br>            <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Jupiter&quot;</span>; <span class="hljs-attribute">surfaceColor</span>: <span class="hljs-string">&quot;orange&quot;</span> &#125;<br>            <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Saturn&quot;</span>; <span class="hljs-attribute">surfaceColor</span>: <span class="hljs-string">&quot;yellow&quot;</span> &#125;<br>            <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Uranus&quot;</span>; <span class="hljs-attribute">surfaceColor</span>: <span class="hljs-string">&quot;lightBlue&quot;</span> &#125;<br>            <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Neptune&quot;</span>; <span class="hljs-attribute">surfaceColor</span>: <span class="hljs-string">&quot;lightBlue&quot;</span> &#125;<br>        &#125;<br><br>        <span class="hljs-attribute">delegate</span>: <span class="hljs-title">BlueBox</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> blueBox</span><br><br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> string name</span><br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> color surfaceColor</span><br><br>            <span class="hljs-attribute">width</span>: <span class="hljs-number">120</span><br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">32</span><br><br>            <span class="hljs-attribute">radius</span>: <span class="hljs-number">3</span><br>            <span class="hljs-attribute">text</span>: name<br><br>            <span class="hljs-title">Box</span> &#123;<br>                <span class="hljs-attribute">anchors.left</span>: <span class="hljs-built_in">parent</span>.left<br>                <span class="hljs-attribute">anchors.verticalCenter</span>: <span class="hljs-built_in">parent</span>.verticalCenter<br>                <span class="hljs-attribute">anchors.leftMargin</span>: <span class="hljs-number">4</span><br><br>                <span class="hljs-attribute">width</span>: <span class="hljs-number">16</span><br>                <span class="hljs-attribute">height</span>: <span class="hljs-number">16</span><br><br>                <span class="hljs-attribute">radius</span>: <span class="hljs-number">8</span><br><br>                <span class="hljs-attribute">color</span>: blueBox.surfaceColor<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240604133358.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h3 id="自定义的-C-模型">自定义的 C++ 模型</h3>
<p>除此之外, 还支持自定义的 C++ 模型 (如, <code>QStringList</code>、<code>QVariantList</code>、<code>QObjectList</code> 等), 以便于利用 C++ 进行扩展.</p>
<p>例如:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QGuiApplication&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QQmlApplicationEngine&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QQmlContext&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QStandardItemModel&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">QGuiApplication <span class="hljs-title">app</span><span class="hljs-params">(argc, argv)</span></span>;<br><br>    QQmlApplicationEngine engine;<br><br>    QStandardItemModel model;<br>    model.<span class="hljs-built_in">appendRow</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QStandardItem</span>(<span class="hljs-string">&quot;apple&quot;</span>));<br>    model.<span class="hljs-built_in">appendRow</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QStandardItem</span>(<span class="hljs-string">&quot;orange&quot;</span>));<br>    model.<span class="hljs-built_in">appendRow</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QStandardItem</span>(<span class="hljs-string">&quot;pear&quot;</span>));<br><br>	<span class="hljs-comment">// 通过 `rootContext` 将其注册为 QML 上下文属性</span><br>    engine.<span class="hljs-built_in">rootContext</span>()-&gt;<span class="hljs-built_in">setContextProperty</span>(<span class="hljs-string">&quot;cppModel&quot;</span>, &amp;model);<br><br>    engine.<span class="hljs-built_in">load</span>(<span class="hljs-built_in">QUrl</span>(<span class="hljs-string">&quot;qrc:/qml/main.qml&quot;</span>));<br><br>    <span class="hljs-keyword">if</span> (engine.<span class="hljs-built_in">rootObjects</span>().<span class="hljs-built_in">isEmpty</span>())<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br><br>    <span class="hljs-keyword">return</span> app.<span class="hljs-built_in">exec</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>接下来, 就可以在 QML 中将 <code>cppModel</code> 绑定到 <code>Repeater</code> 的 <code>model</code> 上. 在委托内部, 我们可以通过 <code>display</code> 属性 (即 <code>Qt:DisplayRole</code>) 访问模型的数据:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Column</span> &#123;<br>    <span class="hljs-attribute">spacing</span>: <span class="hljs-number">10</span><br>    <span class="hljs-title">Repeater</span> &#123;<br>        <span class="hljs-attribute">model</span>: cppModel<br>        <span class="hljs-attribute">delegate</span>: <span class="hljs-title">Text</span> &#123;<br>            <span class="hljs-attribute">text</span>: model.display<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="动态视图">动态视图</h2>
<p><code>Repeater</code> 元素适合有限的静态数据, 但是在真正使用时, 模型通常更加复杂和庞大, 我们需要一个更加智能的解决方案. QtQuick 提供了 <code>ListView</code> 和 <code>GridView</code> 元素, 这两个都是基于 <code>Flickable</code> 区域的元素, 因此用户可以放入更大的数据. 同时, 它们限制了同时实例化的代理数量. 对于一个大型模型来说, 这意味着在同一个场景下只会加载有限的元素.<br>
<img src="/img/Pictures/20240604135408.png" srcset="/img/loading.gif" lazyload alt=""><br>
<img src="/img/Pictures/20240604135413.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h3 id="ListView">ListView</h3>
<p><strong><code>ListView</code> 是一个用于显示可滚动列表的组件</strong>, 它与 <code>Repeater</code> 元素相似, 它使用一个 <code>model</code> 来实例化 <code>delegate</code>, 并且在两个 <code>delegate</code> 之间能够通过 <code>sapcing</code> 设置间隔. 下面的列表显示了怎样设置一个简单的链表:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../common&quot;</span><br><br><span class="hljs-title">Background</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">80</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">300</span><br><br>    <span class="hljs-title">ListView</span> &#123;<br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">20</span><br>        <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br>        <span class="hljs-attribute">model</span>: <span class="hljs-number">100</span><br>        <span class="hljs-attribute">delegate</span>: <span class="hljs-title">GreenBox</span> &#123;<br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> int index</span><br>            <span class="hljs-attribute">width</span>: <span class="hljs-number">40</span><br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">40</span><br>            <span class="hljs-attribute">text</span>: index<br>        &#125;<br>        <span class="hljs-attribute">spacing</span>: <span class="hljs-number">5</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240604135859.png" srcset="/img/loading.gif" lazyload alt=""><br>
如果模型包含的数据多到屏幕无法容纳, <code>ListView</code> 只会显示列表的一部分. 不过, 作为 Qt Quick 默认行为的结果, <code>ListView</code> 不会限制委托显示的屏幕区域. 这意味着委托可能在 <code>ListView</code> 之外仍然可见, 而且用户也可以看到在 <code>ListView</code> 之外动态创建和销毁的委托. 为了避免这种情况, 应该将 <strong><code>clip</code> 属性设置为 <code>true</code> 来激活 <code>ListView</code> 元素的裁剪功能</strong>. 下面显示了 <code>clip</code> 属性设置为 <code>true</code> (左图) 和 <code>false</code> (右图) 的区别:<br>
<img src="/img/Pictures/20240604141212.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>对于用户来说, <code>ListView</code> 是一个可滚动区域. 它支持惯性滚动, 这意味着可以借此来快速浏览内容. 默认情况下, <code>ListView</code> 也可以被拉伸到内容的末端, 然后弹回, 并向用户发出已到达末端的信号.</p>
<p><strong>视图末端的行为由 <code>boundsBehavior</code> 属性来控制的</strong>. 这是一个枚举值, 默认行为是 <code>Flickable.DragAndOvershootBounds</code>, 此时视图可以被拖动到边界之外; 对于 <code>Flickable.StopAtBounds</code> 而言, 视图永远不会移动到边界之外; <code>Flickable.DragOverBounds</code> 允许用户将视图拖动到边界之外, 但在边界处会停止弹动.</p>
<p><strong><code>snapMode</code> 属性可以限制视图停止的位置</strong>. 默认行为是 <code>ListView.NoSnap</code>, 允许视图在任何位置停止; 通过将 <code>snapMode</code> 属性设置为 <code>ListView.SnapToItem</code>, 视图将始终对齐项目的顶部; 将 <code>snapMode</code> 属性设置为 <code>ListView.SnapOneItem</code> 后, 当鼠标或按钮被释放时, 视图将停止在距离第一个可见项不超过一个项的位置, 这在翻页时比较方便.</p>
<h4 id="方向">方向</h4>
<p><code>ListView</code> 元素可以通过 <strong><code>orientation</code> 属性来选择提供垂直滚动列表或水平滚动列表</strong>. 它的默认值为 <code>ListView.Vertical</code>, 提供垂直滚动列表, 可以将其设置为 <code>ListView.Horizontal</code> 来提供水平滚动列表:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../common&quot;</span><br><br><span class="hljs-title">Background</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">480</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">80</span><br><br>    <span class="hljs-title">ListView</span> &#123;<br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">20</span><br>        <span class="hljs-attribute">spacing</span>: <span class="hljs-number">4</span><br>        <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br>        <span class="hljs-attribute">model</span>: <span class="hljs-number">100</span><br>        <span class="hljs-attribute">orientation</span>: Horizontal<br>        <span class="hljs-attribute">delegate</span>: <span class="hljs-title">GreenBox</span> &#123;<br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> int index</span><br>            <span class="hljs-attribute">width</span>: <span class="hljs-number">40</span><br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">40</span><br>            <span class="hljs-attribute">text</span>: index<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240604144715.png" srcset="/img/loading.gif" lazyload alt=""><br>
注意到水平方向的列表默认情况下是从左到右排列的, 可以通过给 <code>ListView</code> 元素的 <code>layoutDirection</code> 属性设置为 <code>Qt.LeftToRight</code> 或 <code>Qt.RightToLeft</code> 来控制列表水平方向的排列.</p>
<h4 id="键盘导航和高亮">键盘导航和高亮</h4>
<p>在使用键盘, 甚至只是方向键选择项的情况下, 需要一种机制来指示当前项. 在 QML 中, 这被称为<strong>高亮显示</strong>.</p>
<p>视图支持一个高亮委托, 它与委托一起显示在视图中. 它可以被视作一个额外的委托, 它只被实例化一次, 并被移动到与当前项相同的位置.</p>
<p>下面是一个示例. 首先需要<strong>将 <code>focus</code> 属性设置为 <code>true</code></strong>, 这样 <code>ListView</code> 就能获得键盘的焦点. 其次, <strong>设置 <code>highlight</code> 属性以指向要使用的高亮委托</strong>. 高亮委托会获取当前项的 <code>x</code>、<code>y</code> 和 <code>height</code> 属性, 如果高亮委托的 <code>width</code> 未设置, 则会使用当前项的 <code>width</code>.</p>
<p>具体代码如下:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../common&quot;</span><br><br><span class="hljs-title">Background</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">240</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">300</span><br><br>    <span class="hljs-title">ListView</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> view</span><br><br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">20</span><br><br>        <span class="hljs-attribute">focus</span>: <span class="hljs-literal">true</span><br><br>        <span class="hljs-attribute">model</span>: <span class="hljs-number">100</span><br>        <span class="hljs-attribute">delegate</span>: numberDelegate<br>        <span class="hljs-attribute">highlight</span>: highlightComponent<br>        <br>        <span class="hljs-attribute">spacing</span>: <span class="hljs-number">5</span><br>        <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br>    &#125;<br><br>    <span class="hljs-title">Component</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> highlightComponent</span><br><br>        <span class="hljs-title">GreenBox</span> &#123;<br>            <span class="hljs-attribute">width</span>: view ? <span class="hljs-attribute">view.width</span> : <span class="hljs-number">0</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-title">Component</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> numberDelegate</span><br><br>        <span class="hljs-title">Item</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> wrapper</span><br><br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> int index</span><br><br>            <span class="hljs-attribute">width</span>: view ? <span class="hljs-attribute">view.width</span> : <span class="hljs-number">0</span><br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">40</span><br><br>            <span class="hljs-title">Text</span> &#123;<br>                <span class="hljs-attribute">anchors.centerIn</span>: <span class="hljs-built_in">parent</span><br>                <span class="hljs-attribute">font.pixelSize</span>: <span class="hljs-number">10</span><br>                <span class="hljs-attribute">text</span>: wrapper.index<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240604151303.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>将高亮显示与 <code>ListView</code> 结合使用时, 可以使用一些属性来控制其行为. <strong><code>highlightRangeMode</code> 控制高亮显示如何受视图中显示内容的影响</strong>. 其中默认设置 <code>ListView.NoHighlightRange</code> 表示高亮显示与视图中项的可见范围完全无关; <code>ListView.StrictlyEnforceRange</code> 值可确保高亮显示始终可见, 如果某个操作试图将高亮显示移出视图的可见范围, 当前项将发生改变, 从而使高亮显示保持可见; <code>ListView.ApplyRange</code> 试图保持高亮显示的可见性, 但不会改变当前项以执行此操作, 相反, 如果有必要, 会允许高亮显示移出视线.</p>
<p>在默认配置中, 视图负责将高亮显示移动到合适的位置, <strong><code>highlightMoveSpeed</code>, <code>highlightMoveDuration</code>, <code>highlightResizeSpeed</code> 和 <code>highlightResizeDuration</code> 属性可以通过设置速度和持续时间来控制移动和大小调整的速度</strong>. 默认情况下, 速度设置为每秒 400 像素, 持续时间设置为 -1, 表示速度和距离控制动画的持续时间. 如果同时设置了速度和持续时间, 则选择较快的动画.</p>
<p>如果想要更详细地控制高亮显示的移动, 可以通过 <code>Behavior</code> 或动画来控制其移动:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-title">Component</span> &#123;<br>    <span class="hljs-attribute">id:</span><span class="hljs-string"> highlightComponent</span><br><br>    <span class="hljs-title">Item</span> &#123;<br>        <span class="hljs-attribute">width</span>: view ? <span class="hljs-attribute">view.width</span> : <span class="hljs-number">0</span><br>        <span class="hljs-attribute">height</span>: view ? <span class="hljs-attribute">view.currentItem.height</span> : <span class="hljs-number">0</span><br><br>        <span class="hljs-attribute">y</span>: view ? <span class="hljs-attribute">view.currentItem.y</span> : <span class="hljs-number">0</span><br><br>        <span class="hljs-built_in">Behavior</span> <span class="hljs-keyword">on</span> <span class="hljs-title">y</span> &#123;<br>            <span class="hljs-title">SequentialAnimation</span> &#123;<br>                <span class="hljs-title">PropertyAnimation</span> &#123; <span class="hljs-attribute">target</span>: highlightRectangle; <span class="hljs-keyword">property</span><span class="hljs-string"></span>: <span class="hljs-string">&quot;opacity&quot;</span>; <span class="hljs-attribute">to</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">duration</span>: <span class="hljs-number">200</span> &#125;<br>                <span class="hljs-title">NumberAnimation</span> &#123; <span class="hljs-attribute">duration</span>: <span class="hljs-number">1</span> &#125;<br>                <span class="hljs-title">PropertyAnimation</span> &#123; <span class="hljs-attribute">target</span>: highlightRectangle; <span class="hljs-keyword">property</span><span class="hljs-string"></span>: <span class="hljs-string">&quot;opacity&quot;</span>; <span class="hljs-attribute">to</span>: <span class="hljs-number">1</span>; <span class="hljs-attribute">duration</span>: <span class="hljs-number">200</span> &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-title">GreenBox</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> highlightRectangle</span><br>            <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="页眉和页脚">页眉和页脚</h4>
<p><strong>在 <code>ListView</code> 中内容的两端, 可以插入 <code>header</code> 和 <code>footer</code></strong>, 代码如下所示:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../common&quot;</span><br><br><span class="hljs-title">Background</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">240</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">300</span><br><br>    <span class="hljs-title">ListView</span> &#123;<br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">20</span><br><br>        <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br><br>        <span class="hljs-attribute">model</span>: <span class="hljs-number">4</span><br>        <span class="hljs-attribute">delegate</span>: numberDelegate<br>        <span class="hljs-attribute">header</span>: headerComponent<br>        <span class="hljs-attribute">footer</span>: footerComponent<br><br>        <span class="hljs-attribute">spacing</span>: <span class="hljs-number">2</span><br>    &#125;<br><br>    <span class="hljs-title">Component</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> headerComponent</span><br><br>        <span class="hljs-title">YellowBox</span> &#123;<br>            <span class="hljs-attribute">width</span>: view ? <span class="hljs-attribute">view.width</span> : <span class="hljs-number">0</span><br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">20</span><br>            <span class="hljs-attribute">text</span>: <span class="hljs-string">&#x27;Header&#x27;</span><br><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-title">Component</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> footerComponent</span><br><br>        <span class="hljs-title">YellowBox</span> &#123;<br>            <span class="hljs-attribute">width</span>: view ? <span class="hljs-attribute">view.width</span> : <span class="hljs-number">0</span><br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">20</span><br>            <span class="hljs-attribute">text</span>: <span class="hljs-string">&#x27;Footer&#x27;</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-title">Component</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> numberDelegate</span><br><br>        <span class="hljs-title">GreenBox</span> &#123;<br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> int index</span><br>            <br>            <span class="hljs-attribute">width</span>: view.width<br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">40</span><br>            <br>            <span class="hljs-attribute">text</span>: <span class="hljs-string">&#x27;Item #&#x27;</span> + index<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240605101608.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h4 id="数据分组">数据分组</h4>
<p><code>ListView</code> 非常灵活, 它不但能够进行平面显示, 而且还可以使用 <code>section</code> 属性进行分组显示. 分组的用途比较多, 比如按照物品的类别分组、按照时间属性分组、按照地理位置分组等.</p>
<p>例如, 假设模型中每个数据项都有一个 <code>position</code> 属性, 我们根据该属性分组:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Rectangle</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">120</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">650</span><br>    <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;lightgray&quot;</span><br><br>    <span class="hljs-title">ListView</span> &#123;<br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">10</span><br>        <span class="hljs-attribute">spacing</span>: <span class="hljs-number">5</span><br>        <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br>        <span class="hljs-attribute">model</span>: <span class="hljs-title">ContactModel</span> &#123;&#125;<br>        <span class="hljs-attribute">delegate</span>: <span class="hljs-title">IconDelegate</span> &#123;&#125;<br><br>        <span class="hljs-comment">// 将相关项组合成一个组</span><br>        <span class="hljs-title">section</span> &#123;<br>            <span class="hljs-keyword">property</span><span class="hljs-string"></span>: <span class="hljs-string">&quot;position&quot;</span>  <span class="hljs-comment">// 该属性决定使用哪个属性</span><br>            <span class="hljs-attribute">criteria</span>: ViewSection.FullString<br>            <span class="hljs-attribute">delegate</span>: sectionComponent<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 分组委托组件</span><br>    <span class="hljs-title">Component</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> sectionComponent</span><br>        <span class="hljs-title">Rectangle</span> &#123;<br>            <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;lightsteelblue&quot;</span><br>            <span class="hljs-attribute">width</span>: ListView.view.width<br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">30</span><br>            <span class="hljs-title">Text</span> &#123;<br>                <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>                <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">5</span><br>                <span class="hljs-attribute">font.bold</span>: <span class="hljs-literal">true</span><br>                <span class="hljs-attribute">text</span>: section  <span class="hljs-comment">// 访问当前分组名称</span><br>                <span class="hljs-attribute">horizontalAlignment</span>: Text.AlignLeft<br>                <span class="hljs-attribute">verticalAlignment</span>: Text.AlignVCenter<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>其中 <strong><code>section.property</code> 决定了使用哪个属性进行分组</strong>, 而 <strong><code>section.criteria</code> 是基于 <code>section.property</code> 形成的分组标准</strong>, 枚举取值如下:</p>
<table>
<thead>
<tr>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ViewSection.FullString (默认值)</td>
<td>分组是基于 <code>section.property</code> 的值</td>
</tr>
<tr>
<td>ViewSection.FirstCharacter</td>
<td>分组是基于 <code>section.property</code> 的首字母的值</td>
</tr>
</tbody>
</table>
<p>至于<strong>分组的委托组件, 则是由 <code>section.delegate</code> 指定的</strong>. 它的作用是创建分组标题, 并在列表项之前插入分组.</p>
<h4 id="动态操作">动态操作</h4>
<p>目前为止, 我们的界面数据都是静态的, 然而在实际应用过程中, 通常会涉及到对界面数据的动态操作, 包括增加新数据、删除现有数据、修改数据内容以及查询特定数据等.</p>
<p>如果我们使用 <code>ListModel</code> 来管理 <code>ListView</code> 中的数据源, 则可以通过添加、移除、修改和查询 <code>ListModel</code> 中的数据项来实现这些操作.</p>
<p>为此, <code>ListModel</code> 提供了相应的便捷方法:</p>
<ul>
<li>增加: 使用 <code>append()</code> 或者 <code>insert()</code> 方法向数据模型中添加新数据项.</li>
<li>删除: 使用 <code>remove()</code> 方法从数据模型中删除特定位置的数据项.</li>
<li>修改: 使用 <code>set()</code> 或者 <code>setProperty()</code> 方法来修改特定位置的数据项.</li>
<li>查询: 通过 <code>get()</code> 方法获取特定位置的数据项.</li>
</ul>
<p>下面是一个包含了增删改查的完整示例, 在这个例子中, 我们通过单击列表项来查询联系人的信息, 通过双击列表项来更新联系人的姓名, 通过点击添加按钮来新增一个联系人, 通过点击删除按钮来移除当前选中的联系人:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-comment">// EditIIconDelegate.qml</span><br><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> QtQuick.Controls<br><span class="hljs-keyword">import</span> QtQuick.Layouts<br><br><span class="hljs-comment">/* 委托组件 */</span><br><br><span class="hljs-title">Item</span> &#123;<br>    <span class="hljs-attribute">id:</span><span class="hljs-string"> wrapper</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">100</span><br><br>    <span class="hljs-title">ColumnLayout</span> &#123;<br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br><br>        <span class="hljs-title">Item</span> &#123; <span class="hljs-attribute">Layout.fillHeight</span>: <span class="hljs-literal">true</span> &#125;<br><br>        <span class="hljs-comment">// 头像</span><br>        <span class="hljs-title">Image</span> &#123;<br>            <span class="hljs-attribute">source</span>: model.portrait<br>            <span class="hljs-attribute">sourceSize</span>: Qt.size(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>)<br>            <span class="hljs-attribute">Layout.alignment</span>: Qt.AlignCenter<br>        &#125;<br><br>        <span class="hljs-comment">// 姓名</span><br>        <span class="hljs-title">Text</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> displayText</span><br>            <span class="hljs-attribute">text</span>: model.name<br>            <span class="hljs-attribute">Layout.preferredHeight</span>: <span class="hljs-number">25</span><br>            <span class="hljs-attribute">Layout.preferredWidth</span>: <span class="hljs-number">80</span><br>            <span class="hljs-attribute">Layout.alignment</span>: Qt.AlignCenter<br>            <span class="hljs-attribute">horizontalAlignment</span>: Qt.AlignHCenter<br>        &#125;<br><br>        <span class="hljs-comment">// 姓名编辑框</span><br>        <span class="hljs-title">TextField</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> textField</span><br>            <span class="hljs-attribute">text</span>: model.name<br>            <span class="hljs-attribute">Layout.preferredHeight</span>: <span class="hljs-number">25</span><br>            <span class="hljs-attribute">Layout.preferredWidth</span>: <span class="hljs-number">80</span><br>            <span class="hljs-attribute">Layout.alignment</span>: Qt.AlignCenter<br>            <span class="hljs-attribute">horizontalAlignment</span>: Qt.AlignHCenter<br>            <span class="hljs-comment">// 编辑框的显示状态取决于姓名显示框（状态相反）</span><br>            <span class="hljs-attribute">visible</span>: !displayText.visible<br>            <span class="hljs-comment">// 3. 更新联系人（编辑完成更新）</span><br>            <span class="hljs-attribute">onEditingFinished</span>: &#123;<br>                model.name = textField.text<br>                textField.focus = <span class="hljs-literal">false</span><br>                displayText.visible = <span class="hljs-literal">true</span><br>            &#125;<br>        &#125;<br><br>        <span class="hljs-title">Item</span> &#123; <span class="hljs-attribute">Layout.fillHeight</span>: <span class="hljs-literal">true</span>&#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 鼠标事件</span><br>    <span class="hljs-title">MouseArea</span> &#123;<br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-comment">// 单击时，改变当前选项</span><br>        <span class="hljs-attribute">onClicked</span>: wrapper.ListView.view.currentIndex = model.index<br>        <span class="hljs-comment">// 双击时，进入编辑模式</span><br>        <span class="hljs-attribute">onDoubleClicked</span>: &#123;<br>            displayText.visible = <span class="hljs-literal">false</span><br>            textField.focus = <span class="hljs-literal">true</span><br>            textField.forceActiveFocus()<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// main.qml</span><br><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> QtQuick.Controls<br><span class="hljs-keyword">import</span> QtQuick.Layouts<br><br><span class="hljs-title">Rectangle</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">120</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">700</span><br><br>    <span class="hljs-title">ColumnLayout</span> &#123;<br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">10</span><br>        <span class="hljs-attribute">spacing</span>: <span class="hljs-number">10</span><br><br>        <span class="hljs-title">Item</span> &#123; <span class="hljs-attribute">Layout.fillHeight</span>: <span class="hljs-literal">true</span> &#125;<br><br>        <span class="hljs-title">Rectangle</span> &#123;<br>            <span class="hljs-attribute">Layout.preferredWidth</span>: <span class="hljs-number">120</span><br>            <span class="hljs-attribute">Layout.preferredHeight</span>: <span class="hljs-number">650</span><br>            <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;lightgray&quot;</span><br><br>            <span class="hljs-title">ListView</span> &#123;<br>                <span class="hljs-attribute">id:</span><span class="hljs-string"> listView</span><br>                <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>                <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">10</span><br>                <span class="hljs-attribute">spacing</span>: <span class="hljs-number">5</span><br>                <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br>                <span class="hljs-attribute">model</span>: <span class="hljs-title">ContactModel</span> &#123; <span class="hljs-attribute">id:</span><span class="hljs-string"> contactModel</span> &#125;<br>                <span class="hljs-attribute">delegate</span>: <span class="hljs-title">EditIIconDelegate</span> &#123;&#125;<br><br>                <span class="hljs-attribute">focus</span>: <span class="hljs-literal">true</span><br>                <span class="hljs-attribute">highlight</span>: <span class="hljs-title">Rectangle</span> &#123; <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;lightsteelblue&quot;</span>; <span class="hljs-attribute">radius</span>: <span class="hljs-number">5</span> &#125;<br><br>                <span class="hljs-comment">// 页脚</span><br>                <span class="hljs-attribute">footer</span>: footerComponent<br><br>                <span class="hljs-comment">// 4. 查询联系人（当前项改变时，刷新页脚显示）</span><br>                <span class="hljs-attribute">onCurrentIndexChanged</span>: &#123;<br>                    <span class="hljs-keyword">var</span> item = model.get(currentIndex)<br>                    footerItem.text = item.name + <span class="hljs-string">&quot;:&quot;</span> + item.number<br>                &#125;<br>            &#125;<br><br>            <span class="hljs-comment">// 页脚</span><br>            <span class="hljs-title">Component</span> &#123;<br>                <span class="hljs-attribute">id:</span><span class="hljs-string"> footerComponent</span><br>                <span class="hljs-title">Text</span> &#123;<br>                    <span class="hljs-attribute">width</span>: ListView.view.width<br>                    <span class="hljs-attribute">height</span>: <span class="hljs-number">30</span><br>                    <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;gray&quot;</span><br>                    <span class="hljs-attribute">horizontalAlignment</span>: Text.AlignHCenter<br>                    <span class="hljs-attribute">verticalAlignment</span>: Text.AlignVCenter<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-title">RowLayout</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> btnLayout</span><br>            <span class="hljs-attribute">spacing</span>: <span class="hljs-number">5</span><br><br>            <span class="hljs-keyword">property</span><span class="hljs-string"> int index</span>: <span class="hljs-number">1</span><br><br>            <span class="hljs-title">Item</span> &#123; <span class="hljs-attribute">Layout.fillWidth</span>: <span class="hljs-literal">true</span> &#125;<br><br>            <span class="hljs-comment">// 1. 新增联系人</span><br>            <span class="hljs-title">RoundButton</span> &#123;<br>                <span class="hljs-attribute">text</span>: <span class="hljs-string">&quot;\u002B&quot;</span><br>                <span class="hljs-attribute">onClicked</span>: &#123;<br>                    <span class="hljs-keyword">var</span> contact = &#123;<br>                        <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Waleon&quot;</span> + btnLayout.index,<br>                        <span class="hljs-attribute">number</span>: <span class="hljs-string">&quot;10000&quot;</span>,<br>                        <span class="hljs-attribute">position</span>: <span class="hljs-string">&quot;COO&quot;</span>,<br>                        <span class="hljs-attribute">portrait</span>: <span class="hljs-string">&quot;qrc:/assets/logo.jpg&quot;</span><br>                    &#125;<br>                    contactModel.append(contact)<br>                    btnLayout.index++<br>                &#125;<br>            &#125;<br><br>            <span class="hljs-comment">// 2. 删除联系人</span><br>            <span class="hljs-title">RoundButton</span> &#123;<br>                <span class="hljs-attribute">text</span>: <span class="hljs-string">&quot;\u002D&quot;</span><br>                <span class="hljs-attribute">onClicked</span>: &#123;<br>                    <span class="hljs-keyword">if</span> (contactModel.count &gt; <span class="hljs-number">0</span>)<br>                        contactModel.remove(listView.currentIndex)<br>                &#125;<br>            &#125;<br><br>            <span class="hljs-title">Item</span> &#123; <span class="hljs-attribute">Layout.fillWidth</span>: <span class="hljs-literal">true</span> &#125;<br>        &#125;<br><br>        <span class="hljs-title">Item</span> &#123; <span class="hljs-attribute">Layout.fillHeight</span>: <span class="hljs-literal">true</span> &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="GridView">GridView</h3>
<p><code>GridView</code> 和 <code>ListView</code> 非常相似, 它表示二维网格而不是线性列表.</p>
<p><img src="/img/Pictures/20240605102424.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>与 <code>ListView</code> 相比, <code>GridView</code> 不依赖于间隔和委托的大小. 相反, 它<strong>使用 <code>cellWidth</code> 和 <code>cellHeight</code> 属性来控制内容委托的尺寸</strong>, 然后将每个委托项放置在每个单元格的左上角.</p>
<p>例如:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../common&quot;</span><br><br><span class="hljs-title">Background</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">220</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">300</span><br><br>    <span class="hljs-title">GridView</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> view</span><br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">20</span><br><br>        <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br><br>        <span class="hljs-attribute">model</span>: <span class="hljs-number">100</span><br><br>        <span class="hljs-attribute">cellWidth</span>: <span class="hljs-number">45</span><br>        <span class="hljs-attribute">cellHeight</span>: <span class="hljs-number">45</span><br><br>        <span class="hljs-attribute">delegate</span>: <span class="hljs-title">GreenBox</span> &#123;<br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> int index</span><br>            <span class="hljs-attribute">width</span>: <span class="hljs-number">40</span><br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">40</span><br>            <span class="hljs-attribute">text</span>: index<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>由于 <code>GridView</code> 中各个元素之间紧密相连, 因此在设置委托时使委托中元素的大小略小于单元格大小, 使得表中各项之间存在空隙. 但是这导致了另一个问题: 设置高亮时会显示在图片之外. 此时不考虑使用 <code>highlight</code>, 可以在委托中添加一个 <code>Rectangle</code> 充当边框:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../common&quot;</span><br><br><span class="hljs-title">Background</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">220</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">300</span><br><br>    <span class="hljs-title">GridView</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> view</span><br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">20</span><br><br>		<span class="hljs-attribute">focus</span>: <span class="hljs-literal">true</span><br>        <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br><br>        <span class="hljs-attribute">model</span>: <span class="hljs-number">100</span><br><br>        <span class="hljs-attribute">cellWidth</span>: <span class="hljs-number">45</span><br>        <span class="hljs-attribute">cellHeight</span>: <span class="hljs-number">45</span><br><br>        <span class="hljs-attribute">delegate</span>: <span class="hljs-title">Component</span> &#123;<br>	        <span class="hljs-attribute">id:</span><span class="hljs-string"> comp0</span><br>	        <br>	        <span class="hljs-title">GreenBox</span> &#123;<br>		        <span class="hljs-attribute">id:</span><span class="hljs-string"> rect</span><br>		        <br>	            required <span class="hljs-keyword">property</span><span class="hljs-string"> int index</span><br>	            <span class="hljs-attribute">width</span>: <span class="hljs-number">40</span><br>	            <span class="hljs-attribute">height</span>: <span class="hljs-number">40</span><br>	            <span class="hljs-attribute">text</span>: index<br><br>				<span class="hljs-title">Rectangle</span> &#123;<br>                    <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>                    <span class="hljs-attribute">border.width</span>: <span class="hljs-built_in">rect</span>.GridView.isCurrentItem ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span><br>                    <span class="hljs-attribute">border.color</span>: <span class="hljs-built_in">rect</span>.GridView.isCurrentItem ? <span class="hljs-string">&quot;orange&quot;</span> : <span class="hljs-string">&quot;black&quot;</span><br>                &#125;<br><br>                <span class="hljs-title">MouseArea</span> &#123;<br>                    <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>                    <span class="hljs-attribute">onClicked</span>: <span class="hljs-built_in">rect</span>.GridView.view.currentIndex = index<br>                &#125;<br>	        &#125;<br>	    &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>GridView</code> 包含页眉和页脚, 可以使用高亮委托, 支持抓取模式和各种边界行为.</p>
<p><strong>方向由 <code>flow</code> 属性控制</strong>, 可以设置为 <code>GridView.LeftToRight</code> 或 <code>GridView.TopToBottom</code>. 前者从左到右添加项, 从上到下添加行, 可在垂直方向滚动; 后者从顶部向底部添加项, 从左到右添加列, 可在水平方向滚动.</p>
<p>除了使用 <code>flow</code> 属性, 还可以使用 <strong><code>layoutDriection</code> 属性将网格方向设置为从左到右或从右到左</strong>.</p>
<h2 id="委托">委托</h2>
<p>由于模型中的每个数据项都是通过委托可视化的, 因此用户实际看到的就是委托.</p>
<p>每个委托都可以访问一些附加属性, 有些来自模型, 有些来自视图.来自模型的附加属性将模型中每个数据项的数据传递给委托, 来自视图的附加属性将视图中委托相关的状态信息传递给委托.</p>
<p>视图附加的最常用属性是 <code>ListView.isCurrentItem</code> 和 <code>ListView.view</code>. 前者是一个布尔值, 表示该项是否为当前项, 后者是对实际视图的只读引用.</p>
<p>使用示例如下:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Rectangle</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">120</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">300</span><br><br>    <span class="hljs-attribute">gradient</span>: <span class="hljs-title">Gradient</span> &#123;<br>        <span class="hljs-title">GradientStop</span> &#123; <span class="hljs-attribute">position</span>: <span class="hljs-number">0.0</span>; <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#f6f6f6&quot;</span> &#125;<br>        <span class="hljs-title">GradientStop</span> &#123; <span class="hljs-attribute">position</span>: <span class="hljs-number">1.0</span>; <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#d7d7d7&quot;</span> &#125;<br>    &#125;<br><br>    <span class="hljs-title">ListView</span> &#123;<br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">20</span><br><br>        <span class="hljs-attribute">focus</span>: <span class="hljs-literal">true</span><br><br>        <span class="hljs-attribute">model</span>: <span class="hljs-number">100</span><br>        <span class="hljs-attribute">delegate</span>: numberDelegate<br><br>        <span class="hljs-attribute">spacing</span>: <span class="hljs-number">5</span><br>        <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br>    &#125;<br><br>    <span class="hljs-title">Component</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> numberDelegate</span><br><br>        <span class="hljs-title">Rectangle</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> wrapper</span><br><br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> int index</span><br><br>            <span class="hljs-attribute">width</span>: ListView.view.width<br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">40</span><br><br>            <span class="hljs-attribute">color</span>: ListView.isCurrentItem ? <span class="hljs-string">&quot;#157efb&quot;</span> : <span class="hljs-string">&quot;#53d769&quot;</span><br>            <span class="hljs-attribute">border.color</span>: Qt.lighter(<span class="hljs-built_in">color</span>, <span class="hljs-number">1.1</span>)<br><br>            <span class="hljs-title">Text</span> &#123;<br>                <span class="hljs-attribute">anchors.centerIn</span>: <span class="hljs-built_in">parent</span><br><br>                <span class="hljs-attribute">font.pixelSize</span>: <span class="hljs-number">10</span><br><br>                <span class="hljs-attribute">text</span>: wrapper.index<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240605105813.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h3 id="为增-删项添加动画">为增/删项添加动画</h3>
<p>在某些情况下, 视图中显示的内容会随着时间的推移而改变. 当底层数据模型的改变时, 项会被添加和删除. 在这种情况下, 可以使用可视化提示为用户提供方向感并帮助用户了解添加或删除了哪些数据.</p>
<p>QML 视图为委托附加了 <code>onAdd</code> 和 <code>onRemove</code> 两个信号, 使用示例如下:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Rectangle</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">480</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">300</span><br><br>    <span class="hljs-attribute">gradient</span>: <span class="hljs-title">Gradient</span> &#123;<br>        <span class="hljs-title">GradientStop</span> &#123; <span class="hljs-attribute">position</span>: <span class="hljs-number">0.0</span>; <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#dbddde&quot;</span> &#125;<br>        <span class="hljs-title">GradientStop</span> &#123; <span class="hljs-attribute">position</span>: <span class="hljs-number">1.0</span>; <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#5fc9f8&quot;</span> &#125;<br>    &#125;<br><br>    <span class="hljs-title">ListModel</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> theModel</span><br><br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">number</span>: <span class="hljs-number">0</span> &#125;<br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">number</span>: <span class="hljs-number">1</span> &#125;<br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">number</span>: <span class="hljs-number">2</span> &#125;<br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">number</span>: <span class="hljs-number">3</span> &#125;<br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">number</span>: <span class="hljs-number">4</span> &#125;<br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">number</span>: <span class="hljs-number">5</span> &#125;<br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">number</span>: <span class="hljs-number">6</span> &#125;<br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">number</span>: <span class="hljs-number">7</span> &#125;<br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">number</span>: <span class="hljs-number">8</span> &#125;<br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">number</span>: <span class="hljs-number">9</span> &#125;<br>    &#125;<br><br>    <span class="hljs-title">Rectangle</span> &#123;<br>        <span class="hljs-keyword">property</span><span class="hljs-string"> int count</span>: <span class="hljs-number">9</span><br><br>        <span class="hljs-attribute">anchors.left</span>: <span class="hljs-built_in">parent</span>.left<br>        <span class="hljs-attribute">anchors.right</span>: <span class="hljs-built_in">parent</span>.right<br>        <span class="hljs-attribute">anchors.bottom</span>: <span class="hljs-built_in">parent</span>.bottom<br>        <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">20</span><br><br>        <span class="hljs-attribute">height</span>: <span class="hljs-number">40</span><br><br>        <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#53d769&quot;</span><br>        <span class="hljs-attribute">border.color</span>: Qt.lighter(<span class="hljs-built_in">color</span>, <span class="hljs-number">1.1</span>)<br><br>        <span class="hljs-title">Text</span> &#123;<br>            <span class="hljs-attribute">anchors.centerIn</span>: <span class="hljs-built_in">parent</span><br><br>            <span class="hljs-attribute">text</span>: <span class="hljs-string">&quot;Add item!&quot;</span><br>        &#125;<br><br>        <span class="hljs-title">MouseArea</span> &#123;<br>            <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br><br>            <span class="hljs-attribute">onClicked</span>: &#123;<br>                theModel.append(&#123;<span class="hljs-string">&quot;number&quot;</span>: ++<span class="hljs-built_in">parent</span>.count&#125;)<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-title">GridView</span> &#123;<br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">20</span><br>        <span class="hljs-attribute">anchors.bottomMargin</span>: <span class="hljs-number">80</span><br><br>        <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br><br>        <span class="hljs-attribute">model</span>: theModel<br><br>        <span class="hljs-attribute">cellWidth</span>: <span class="hljs-number">45</span><br>        <span class="hljs-attribute">cellHeight</span>: <span class="hljs-number">45</span><br><br>        <span class="hljs-attribute">delegate</span>: numberDelegate<br>    &#125;<br><br>    <span class="hljs-title">Component</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> numberDelegate</span><br><br>        <span class="hljs-title">Rectangle</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> wrapper</span><br><br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> int index </span><br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> int number</span><br><br>            <span class="hljs-attribute">width</span>: <span class="hljs-number">40</span><br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">40</span><br><br>            <span class="hljs-attribute">gradient</span>: <span class="hljs-title">Gradient</span> &#123;<br>                <span class="hljs-title">GradientStop</span> &#123; <span class="hljs-attribute">position</span>: <span class="hljs-number">0.0</span>; <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#f8306a&quot;</span> &#125;<br>                <span class="hljs-title">GradientStop</span> &#123; <span class="hljs-attribute">position</span>: <span class="hljs-number">1.0</span>; <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#fb5b40&quot;</span> &#125;<br>            &#125;<br><br>            <span class="hljs-title">Text</span> &#123;<br>                <span class="hljs-attribute">anchors.centerIn</span>: <span class="hljs-built_in">parent</span><br><br>                <span class="hljs-attribute">font.pixelSize</span>: <span class="hljs-number">10</span><br><br>                <span class="hljs-attribute">text</span>: wrapper.number<br>            &#125;<br><br>            <span class="hljs-title">MouseArea</span> &#123;<br>                <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br><br>                <span class="hljs-attribute">onClicked</span>: &#123;<br>                    <span class="hljs-keyword">if</span> (wrapper.index == <span class="hljs-number">-1</span>) &#123;<br>                        <span class="hljs-keyword">return</span><br>                    &#125;<br>                    theModel.remove(wrapper.index)<br>                &#125;<br>            &#125;<br>            <br>            <span class="hljs-attribute">GridView.onRemove</span>: removeAnimation.start()<br>            <br>            <span class="hljs-title">SequentialAnimation</span> &#123;<br>                <span class="hljs-attribute">id:</span><span class="hljs-string"> removeAnimation</span><br>                <br>                <span class="hljs-title">PropertyAction</span> &#123; <span class="hljs-attribute">target</span>: wrapper; <span class="hljs-keyword">property</span><span class="hljs-string"></span>: <span class="hljs-string">&quot;GridView.delayRemove&quot;</span>; <span class="hljs-attribute">value</span>: <span class="hljs-literal">true</span> &#125;<br>                <span class="hljs-title">NumberAnimation</span> &#123; <span class="hljs-attribute">target</span>: wrapper; <span class="hljs-keyword">property</span><span class="hljs-string"></span>: <span class="hljs-string">&quot;scale&quot;</span>; <span class="hljs-attribute">to</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">duration</span>: <span class="hljs-number">250</span>; <span class="hljs-attribute">easing.type</span>: Easing.InOutQuad &#125;<br>                <span class="hljs-title">PropertyAction</span> &#123; <span class="hljs-attribute">target</span>: wrapper; <span class="hljs-keyword">property</span><span class="hljs-string"></span>: <span class="hljs-string">&quot;GridView.delayRemove&quot;</span>; <span class="hljs-attribute">value</span>: <span class="hljs-literal">false</span> &#125;<br>            &#125;<br><br>            <span class="hljs-attribute">GridView.onAdd</span>: addAnimation.start()<br>            <br>            <span class="hljs-title">SequentialAnimation</span> &#123;<br>                <span class="hljs-attribute">id:</span><span class="hljs-string"> addAnimation</span><br>                <span class="hljs-title">NumberAnimation</span> &#123; <br>                    <span class="hljs-attribute">target</span>: wrapper<br>                    <span class="hljs-keyword">property</span><span class="hljs-string"></span>: <span class="hljs-string">&quot;scale&quot;</span><br>                    <span class="hljs-attribute">from</span>: <span class="hljs-number">0</span><br>                    <span class="hljs-attribute">to</span>: <span class="hljs-number">1</span><br>                    <span class="hljs-attribute">duration</span>: <span class="hljs-number">250</span><br>                    <span class="hljs-attribute">easing.type</span>: Easing.InOutQuad <br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240605125744.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h3 id="可变形的委托">可变形的委托</h3>
<p>在列表中一个常见的机制是: 当某个项目被激活时, 它会被展开. 这可以用来动态地让项展开以填满屏幕, 从而进入用户界面的新部分, 也可以用来为给定列表中的当前项提供更多信息.</p>
<p>在下面的示例中, 每个项目在被点击时会将大小扩展到和包含它的 <code>ListView</code> 匹配. 额外的空间用于添加更多信息. 用于控制这个机制的是一个叫做 <code>expanded</code> 的状态, 每个委托都可以进入这个状态, 在这个状态下, 项目被展开. 在这种状态下，一些属性也会被改变.</p>
<p>首先, <code>wrapper</code> 的高度被设置为 <code>ListView</code> 的高度, 然后缩略图被放大并向下移动. 此外, 两个隐藏的项 <code>factsView</code> 和 <code>closeButton</code> 通过改变元素的 <code>opacity</code> 属性来显示.</p>
<p>当项目首次被点击时, 它进入 <code>expanded</code> 状态, 使委托填满 <code>ListView</code> 并重新排列内容. 当关闭按钮被点击时, 状态被清除, 使委托返回到之前的状态并重新启用 <code>ListView</code>.</p>
<p>具体代码如下所示:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Item</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">300</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">480</span><br><br>    <span class="hljs-title">Rectangle</span> &#123;<br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>        <span class="hljs-attribute">gradient</span>: <span class="hljs-title">Gradient</span> &#123;<br>            <span class="hljs-title">GradientStop</span> &#123; <span class="hljs-attribute">position</span>: <span class="hljs-number">0.0</span>; <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#4a4a4a&quot;</span> &#125;<br>            <span class="hljs-title">GradientStop</span> &#123; <span class="hljs-attribute">position</span>: <span class="hljs-number">1.0</span>; <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#2b2b2b&quot;</span> &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-title">ListView</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> listView</span><br><br>        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br><br>        <span class="hljs-attribute">delegate</span>: detailsDelegate<br>        <span class="hljs-attribute">model</span>: planets<br>    &#125;<br><br>    <span class="hljs-title">ListModel</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> planets</span><br><br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Mercury&quot;</span>; <span class="hljs-attribute">imageSource</span>: <span class="hljs-string">&quot;images/mercury.jpeg&quot;</span>; <span class="hljs-attribute">facts</span>: <span class="hljs-string">&quot;Mercury is the smallest planet in the Solar System. It is the closest planet to the sun. It makes one trip around the Sun once every 87.969 days.&quot;</span> &#125;<br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Venus&quot;</span>; <span class="hljs-attribute">imageSource</span>: <span class="hljs-string">&quot;images/venus.jpeg&quot;</span>; <span class="hljs-attribute">facts</span>: <span class="hljs-string">&quot;Venus is the second planet from the Sun. It is a terrestrial planet because it has a solid, rocky surface. The other terrestrial planets are Mercury, Earth and Mars. Astronomers have known Venus for thousands of years.&quot;</span> &#125;<br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Earth&quot;</span>; <span class="hljs-attribute">imageSource</span>: <span class="hljs-string">&quot;images/earth.jpeg&quot;</span>; <span class="hljs-attribute">facts</span>: <span class="hljs-string">&quot;The Earth is the third planet from the Sun. It is one of the four terrestrial planets in our Solar System. This means most of its mass is solid. The other three are Mercury, Venus and Mars. The Earth is also called the Blue Planet, &#x27;Planet Earth&#x27;, and &#x27;Terra&#x27;.&quot;</span> &#125;<br>        <span class="hljs-title">ListElement</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Mars&quot;</span>; <span class="hljs-attribute">imageSource</span>: <span class="hljs-string">&quot;images/mars.jpeg&quot;</span>; <span class="hljs-attribute">facts</span>: <span class="hljs-string">&quot;Mars is the fourth planet from the Sun in the Solar System. Mars is dry, rocky and cold. It is home to the largest volcano in the Solar System. Mars is named after the mythological Roman god of war because it is a red planet, which signifies the colour of blood.&quot;</span> &#125;<br>    &#125;<br><br>    <span class="hljs-title">Component</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> detailsDelegate</span><br><br>        <span class="hljs-title">Item</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> wrapper</span><br><br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> string name</span><br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> string imageSource</span><br>            required <span class="hljs-keyword">property</span><span class="hljs-string"> string facts</span><br><br>            <span class="hljs-attribute">width</span>: listView.width<br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">30</span><br><br>            <span class="hljs-title">Rectangle</span> &#123;<br>                <span class="hljs-attribute">anchors.left</span>: <span class="hljs-built_in">parent</span>.left<br>                <span class="hljs-attribute">anchors.right</span>: <span class="hljs-built_in">parent</span>.right<br>                <span class="hljs-attribute">anchors.top</span>: <span class="hljs-built_in">parent</span>.top<br><br>                <span class="hljs-attribute">height</span>: <span class="hljs-number">30</span><br><br>                <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#333&quot;</span><br>                <span class="hljs-attribute">border.color</span>: Qt.lighter(<span class="hljs-built_in">color</span>, <span class="hljs-number">1.2</span>)<br>                <span class="hljs-title">Text</span> &#123;<br>                    <span class="hljs-attribute">anchors.left</span>: <span class="hljs-built_in">parent</span>.left<br>                    <span class="hljs-attribute">anchors.verticalCenter</span>: <span class="hljs-built_in">parent</span>.verticalCenter<br>                    <span class="hljs-attribute">anchors.leftMargin</span>: <span class="hljs-number">4</span><br><br>                    <span class="hljs-attribute">font.pixelSize</span>: <span class="hljs-built_in">parent</span>.height<span class="hljs-number">-4</span><br>                    <span class="hljs-attribute">color</span>: <span class="hljs-string">&#x27;#fff&#x27;</span><br><br>                    <span class="hljs-attribute">text</span>: wrapper.name<br>                &#125;<br>            &#125;<br><br><br>            <span class="hljs-title">Rectangle</span> &#123;<br>                <span class="hljs-attribute">id:</span><span class="hljs-string"> image</span><br><br>                <span class="hljs-attribute">width</span>: <span class="hljs-number">26</span><br>                <span class="hljs-attribute">height</span>: <span class="hljs-number">26</span><br><br>                <span class="hljs-attribute">anchors.right</span>: <span class="hljs-built_in">parent</span>.right<br>                <span class="hljs-attribute">anchors.top</span>: <span class="hljs-built_in">parent</span>.top<br>                <span class="hljs-attribute">anchors.rightMargin</span>: <span class="hljs-number">2</span><br>                <span class="hljs-attribute">anchors.topMargin</span>: <span class="hljs-number">2</span><br><br>                <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;black&quot;</span><br><br><br>                <span class="hljs-title">Image</span> &#123;<br>                    <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br><br>                    <span class="hljs-attribute">fillMode</span>: Image.PreserveAspectFit<br><br>                    <span class="hljs-attribute">source</span>: wrapper.imageSource<br>                &#125;<br>            &#125;<br><br>            <span class="hljs-title">MouseArea</span> &#123;<br>                <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>                <span class="hljs-attribute">onClicked</span>: <span class="hljs-built_in">parent</span>.state = <span class="hljs-string">&quot;expanded&quot;</span><br>            &#125;<br><br>            <span class="hljs-title">Item</span> &#123;<br>                <span class="hljs-attribute">id:</span><span class="hljs-string"> factsView</span><br><br>                <span class="hljs-attribute">anchors.top</span>: image.bottom<br>                <span class="hljs-attribute">anchors.left</span>: <span class="hljs-built_in">parent</span>.left<br>                <span class="hljs-attribute">anchors.right</span>: <span class="hljs-built_in">parent</span>.right<br>                <span class="hljs-attribute">anchors.bottom</span>: <span class="hljs-built_in">parent</span>.bottom<br><br>                <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span><br><br>                <span class="hljs-title">Rectangle</span> &#123;<br>                    <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br><br>                    <span class="hljs-attribute">gradient</span>: <span class="hljs-title">Gradient</span> &#123;<br>                        <span class="hljs-title">GradientStop</span> &#123; <span class="hljs-attribute">position</span>: <span class="hljs-number">0.0</span>; <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#fed958&quot;</span> &#125;<br>                        <span class="hljs-title">GradientStop</span> &#123; <span class="hljs-attribute">position</span>: <span class="hljs-number">1.0</span>; <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#fecc2f&quot;</span> &#125;<br>                    &#125;<br>                    <span class="hljs-attribute">border.color</span>: <span class="hljs-string">&#x27;#000000&#x27;</span><br>                    <span class="hljs-attribute">border.width</span>: <span class="hljs-number">2</span><br><br>                    <span class="hljs-title">Text</span> &#123;<br>                        <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>                        <span class="hljs-attribute">anchors.margins</span>: <span class="hljs-number">5</span><br><br>                        <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br>                        <span class="hljs-attribute">wrapMode</span>: Text.WordWrap<br>                        <span class="hljs-attribute">color</span>: <span class="hljs-string">&#x27;#1f1f21&#x27;</span><br><br>                        <span class="hljs-attribute">font.pixelSize</span>: <span class="hljs-number">12</span><br><br>                        <span class="hljs-attribute">text</span>: wrapper.facts<br>                    &#125;<br>                &#125;<br>            &#125;<br><br>            <span class="hljs-title">Rectangle</span> &#123;<br>                <span class="hljs-attribute">id:</span><span class="hljs-string"> closeButton</span><br><br>                <span class="hljs-attribute">anchors.right</span>: <span class="hljs-built_in">parent</span>.right<br>                <span class="hljs-attribute">anchors.top</span>: <span class="hljs-built_in">parent</span>.top<br>                <span class="hljs-attribute">anchors.rightMargin</span>: <span class="hljs-number">2</span><br>                <span class="hljs-attribute">anchors.topMargin</span>: <span class="hljs-number">2</span><br><br>                <span class="hljs-attribute">width</span>: <span class="hljs-number">26</span><br>                <span class="hljs-attribute">height</span>: <span class="hljs-number">26</span><br><br>                <span class="hljs-attribute">color</span>: <span class="hljs-string">&quot;#157efb&quot;</span><br>                <span class="hljs-attribute">border.color</span>: Qt.lighter(<span class="hljs-built_in">color</span>, <span class="hljs-number">1.1</span>)<br><br>                <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span><br><br>                <span class="hljs-title">MouseArea</span> &#123;<br>                    <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>                    <span class="hljs-attribute">onClicked</span>: wrapper.state = <span class="hljs-string">&quot;&quot;</span><br>                &#125;<br>            &#125;<br><br>            <span class="hljs-attribute">states</span>: [<br>                <span class="hljs-title">State</span> &#123;<br>                    <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;expanded&quot;</span><br><br>                    <span class="hljs-title">PropertyChanges</span> &#123; <span class="hljs-attribute">target</span>: wrapper; <span class="hljs-attribute">height</span>: listView.height &#125;<br>                    <span class="hljs-title">PropertyChanges</span> &#123; <span class="hljs-attribute">target</span>: image; <span class="hljs-attribute">width</span>: listView.width; <span class="hljs-attribute">height</span>: listView.width; <span class="hljs-attribute">anchors.rightMargin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">anchors.topMargin</span>: <span class="hljs-number">30</span> &#125;<br>                    <span class="hljs-title">PropertyChanges</span> &#123; <span class="hljs-attribute">target</span>: factsView; <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span> &#125;<br>                    <span class="hljs-title">PropertyChanges</span> &#123; <span class="hljs-attribute">target</span>: closeButton; <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span> &#125;<br>                    <span class="hljs-title">PropertyChanges</span> &#123; <span class="hljs-attribute">target</span>: wrapper.ListView.view; <span class="hljs-attribute">contentY</span>: wrapper.y; <span class="hljs-attribute">interactive</span>: <span class="hljs-literal">false</span> &#125;<br>                &#125;<br>            ]<br><br>            <span class="hljs-attribute">transitions</span>: [<br>                <span class="hljs-title">Transition</span> &#123;<br>                    <span class="hljs-title">NumberAnimation</span> &#123;<br>                        <span class="hljs-attribute">duration</span>: <span class="hljs-number">200</span>;<br>                        <span class="hljs-attribute">properties</span>: <span class="hljs-string">&quot;height,width,anchors.rightMargin,anchors.topMargin,opacity,contentY&quot;</span><br>                    &#125;<br>                &#125;<br>            ]<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>其中 <code>contentY</code> 属性表示 <code>ListView</code> 当前显示内容的垂直滚动位置, 即视图顶部与内容顶部之间的距离. 假设你有一个 <code>ListView</code> 包含多个项, 每个项的高度是 30. 当你点击某个项目, 该项目的 <code>y</code> 值可能是 60. 将 <code>contentY</code> 设置为这个项的 <code>y</code> 值 60 时, <code>ListView</code> 会滚动, 使得这个项移动到 <code>ListView</code> 的顶部.</li>
</ul>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240605140350.png" srcset="/img/loading.gif" lazyload alt=""><br>
<img src="/img/Pictures/20240605140355.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h2 id="路径">路径</h2>
<p>在 QML 中, <code>Path</code> 是一种用于定义和描述路径的元素, 通常需要和 <code>Canvas</code>、<code>PathView</code>、 <code>Shape</code> 等元素结合一起使用,  用于生成复杂的图形或动画效果.</p>
<p>所谓<strong>路径, 是由一系列路径元素组成的集合</strong>, 从起点开始, 各段首尾相连, 最终到达终点结束. 其中, <strong>每个路径元素代表着整个路径中的一段</strong>, 可以是直线、曲线或者其他形状.</p>
<p>下面是 <code>Path</code> 元素提供的一些属性:</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>startX</td>
<td>路径起点的 x 坐标</td>
</tr>
<tr>
<td>startY</td>
<td>路径起点的 y 坐标</td>
</tr>
<tr>
<td>pathElements</td>
<td>路径元素列表, 保存了组成路径的多个路径元素, 常见的路径元素有: PathLine、PathQuad、PathCubic、PathArc、PathAngleArc、PathCurve、PathSvg 等.</td>
</tr>
<tr>
<td>closed</td>
<td>路径的终点与起点是否重合, 如果重合则为 <code>true</code>, 否则为 <code>false</code></td>
</tr>
</tbody>
</table>
<p>需要注意的是, <code>Path</code> 并没有提供类似 <code>endX</code> / <code>endY</code> 这样的属性来指定路径的终点, <strong>路径的终点是由路径上最后一个元素定义的</strong>. 而中间的路径元素则依次连接起点和终点, 从而形成一条完整的路径.</p>
<h3 id="基本路径">基本路径</h3>
<h4 id="直线">直线</h4>
<p><strong><code>PathLine</code> 定义了路径中的一段直线</strong>, 它的起点由 <code>startX</code> / <code>startY</code> 属性或者是上一个路径元素的终点定义, 而终点则由 <code>x</code> / <code>y</code> 属性 (绝对路径, 相对于父元素) 定义或 <code>relativeX</code> / <code>relativeY</code> 属性 (相对路径, 相对于路径的起始点) 定义. 通过调整这些属性, 可以控制直线的长度和方向.</p>
<p>例如:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Canvas</span> &#123;<br>    <span class="hljs-attribute">id:</span><span class="hljs-string"> root</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">200</span><br>    <span class="hljs-attribute">contextType</span>: <span class="hljs-string">&quot;2d&quot;</span><br><br>    <span class="hljs-title">Path</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> myPath</span><br>        <span class="hljs-attribute">startX</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">startY</span>: root.height/<span class="hljs-number">2</span><br><br>        <span class="hljs-comment">// 绝对坐标</span><br>        <span class="hljs-title">PathLine</span> &#123; <span class="hljs-attribute">x</span>: root.width; <span class="hljs-attribute">y</span>: root.height/<span class="hljs-number">2</span> &#125;<br><br>        <span class="hljs-comment">// 相对坐标</span><br>        <span class="hljs-comment">// PathLine &#123; relativeX: root.width; relativeY: 0 &#125;</span><br><br>        <span class="hljs-comment">// 一个绝对坐标，一个相对坐标</span><br>        <span class="hljs-comment">// PathLine &#123; x: root.width; relativeY: 0 &#125;</span><br>    &#125;<br><br>    <span class="hljs-attribute">onPaint</span>: &#123;<br>        context.lineWidth = <span class="hljs-number">1</span><br>        context.strokeStyle = <span class="hljs-string">&quot;black&quot;</span><br>        context.path = myPath<br>        context.stroke()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240614145551.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h4 id="二次贝塞尔曲线">二次贝塞尔曲线</h4>
<p><code>PathQuad</code> 定义了路径中的一段二次贝塞尔曲线, 由起点、<strong>控制点</strong>和终点三个点组成, 其中控制点用于控制曲线的形状.</p>
<p><img src="/img/Pictures/20240614150948.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>该元素起始点和终点的定义与直线一致, 控制点由 <code>controlX</code> / <code>controlY</code> 属性或 <code>relativeControlX</code> / <code>relativeControlY</code> 属性定义.</p>
<p>例如:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Canvas</span> &#123;<br>    <span class="hljs-attribute">id:</span><span class="hljs-string"> root</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">200</span><br>    <span class="hljs-attribute">contextType</span>: <span class="hljs-string">&quot;2d&quot;</span><br><br>    <span class="hljs-title">Path</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> myPath</span><br>        <span class="hljs-attribute">startX</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">startY</span>: root.height / <span class="hljs-number">2</span><br>        <span class="hljs-title">PathQuad</span> &#123;<br>            <span class="hljs-attribute">x</span>: root.width; <span class="hljs-attribute">y</span>: root.height / <span class="hljs-number">2</span><br>            <span class="hljs-attribute">controlX</span>: root.width / <span class="hljs-number">2</span>; <span class="hljs-attribute">controlY</span>: <span class="hljs-number">0</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-attribute">onPaint</span>: &#123;<br>        context.lineWidth = <span class="hljs-number">1</span><br>        context.strokeStyle = <span class="hljs-string">&quot;black&quot;</span><br>        context.path = myPath<br>        context.stroke()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240614145939.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h4 id="三次贝塞尔曲线">三次贝塞尔曲线</h4>
<p><code>PathCubic</code> 定义了路径中的一段三次贝塞尔曲线, 由起点、<strong>两个控制点</strong>和终点四个点组成. 由于比 <code>PathQuad</code> 多了一个控制点, 因此 <code>PathCubic</code> 提供了更高的灵活性和控制性.</p>
<p><img src="/img/Pictures/20240614151006.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p><code>PathCubic</code> 的起点和终点和之前一样, 两个控制点分别用 <code>control1X</code> / <code>control1Y</code> 或 <code>relativeControl1X</code> / <code>relativeControl1Y</code> 和 <code>control2X</code> / <code>control2Y</code> 或 <code>relativeControl2X</code> / <code>relativeControl2Y</code> 属性定义.</p>
<p>例如:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Canvas</span> &#123;<br>    <span class="hljs-attribute">id:</span><span class="hljs-string"> root</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">200</span><br>    <span class="hljs-attribute">contextType</span>: <span class="hljs-string">&quot;2d&quot;</span><br><br>    <span class="hljs-title">Path</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> myPath</span><br>        <span class="hljs-attribute">startX</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">startY</span>: <span class="hljs-number">100</span><br>        <span class="hljs-title">PathCubic</span> &#123;<br>            <span class="hljs-attribute">x</span>: <span class="hljs-number">200</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">100</span><br>            <span class="hljs-attribute">control1X</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">control1Y</span>: <span class="hljs-number">0</span><br>            <span class="hljs-attribute">control2X</span>: <span class="hljs-number">150</span>; <span class="hljs-attribute">control2Y</span>: <span class="hljs-number">0</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-attribute">onPaint</span>: &#123;<br>        context.lineWidth = <span class="hljs-number">1</span><br>        context.strokeStyle = <span class="hljs-string">&quot;black&quot;</span><br>        context.path = myPath<br>        context.stroke()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240614151052.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h4 id="圆弧">圆弧</h4>
<p><code>PathArc</code> 定义了路径中的一段圆弧, 由起点、<strong>圆弧半径</strong>、终点以及<strong>圆弧方向</strong>等参数定义.</p>
<p>弧线的半径由 <code>radiusX</code> / <code>radiusY</code> 属性定义, <code>direction</code> 属性则定义圆弧的方向, 可取值有 <code>PathArc.Clockwise</code> (默认值) 和 <code>PathArc.Counterclockwise</code>, 分别表示顺时针和逆时针.</p>
<p>当指定了起点、终点、半径和方向之后, <strong>有可能存在两条弧线满足条件, 这时可以使用 <code>useLargeArc</code> 属性来进行区分</strong>, 若使用默认值 <code>false</code>, 则取较小的弧线; 若将值设置为 <code>true</code>, 则取较大的弧线.<br>
<img src="/img/Pictures/20240614153321.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>例如:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Canvas</span> &#123;<br>    <span class="hljs-attribute">id:</span><span class="hljs-string"> root</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">200</span><br>    <span class="hljs-attribute">contextType</span>: <span class="hljs-string">&quot;2d&quot;</span><br><br>    <span class="hljs-title">Path</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> myPath</span><br>        <span class="hljs-attribute">startX</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">startY</span>: <span class="hljs-number">100</span><br>        <span class="hljs-title">PathArc</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> arc</span><br>            <span class="hljs-attribute">x</span>: <span class="hljs-number">100</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">200</span><br>            <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">100</span>; <span class="hljs-attribute">radiusY</span>: <span class="hljs-number">100</span><br>            <span class="hljs-attribute">direction</span>: PathArc.Clockwise<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-attribute">onPaint</span>: &#123;<br>        context.lineWidth = <span class="hljs-number">1</span><br>        context.strokeStyle = <span class="hljs-string">&quot;black&quot;</span><br><br>        <span class="hljs-comment">// 较小的圆弧</span><br>        context.path = myPath<br>        context.stroke()<br><br>        <span class="hljs-comment">// 较大的圆弧</span><br>        arc.useLargeArc = <span class="hljs-literal">true</span><br>        context.path = myPath<br>        context.stroke()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240614153600.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p><strong><code>PathAngleArc</code> 基于角度定义圆弧</strong>, <strong>圆弧的中心点</strong>由 <code>centerX</code> / <code>centerY</code> 属性定义, <strong>x / y 轴的半径</strong>则由 <code>radiusX</code> 和 <code>radiusY</code> 属性定义, <code>startAngle</code> 属性指定<strong>圆弧的起始角度</strong> (3 点钟位置为 0 度, 顺时针为正), <code>sweepAngle</code> 属性是<strong>圆弧从 <code>startAngle</code> 开始扫过的角度</strong>.</p>
<p><code>moveToStart</code> 属性指定了<strong>该元素是否应该与前一个路径元素 (或 <code>startX</code> / <code>startY</code>) 断开连接</strong>, 默认值为 <code>true</code>, 如果设置为 <code>false</code>, 则前一个路径元素的终点 (或 <code>startX</code> / <code>startY</code>) 将用一条直线连接到弧的起点.</p>
<p><img src="/img/Pictures/20240614154317.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>例如:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Canvas</span> &#123;<br>    <span class="hljs-attribute">id:</span><span class="hljs-string"> root</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">200</span><br>    <span class="hljs-attribute">contextType</span>: <span class="hljs-string">&quot;2d&quot;</span><br><br>    <span class="hljs-title">Path</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> myPath</span><br>        <span class="hljs-title">PathAngleArc</span> &#123;<br>            <span class="hljs-attribute">centerX</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">centerY</span>: <span class="hljs-number">0</span><br>            <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">150</span>; <span class="hljs-attribute">radiusY</span>: <span class="hljs-number">150</span><br>            <span class="hljs-attribute">startAngle</span>: <span class="hljs-number">20</span><br>            <span class="hljs-attribute">sweepAngle</span>: <span class="hljs-number">50</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-attribute">onPaint</span>: &#123;<br>        context.lineWidth = <span class="hljs-number">1</span><br>        context.strokeStyle = <span class="hljs-string">&quot;black&quot;</span><br>        context.path = myPath<br>        context.stroke()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240614154500.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h4 id="曲线">曲线</h4>
<p><code>PathCurve</code> 定义了路径中的一段曲线, 通常使用多个点来生成. 相比 <code>PathQuad</code>, 这种方式更加简单, 而且曲线也更加平滑.</p>
<p>示例如下:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Canvas</span> &#123;<br>    <span class="hljs-attribute">id:</span><span class="hljs-string"> root</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">200</span><br>    <span class="hljs-attribute">contextType</span>: <span class="hljs-string">&quot;2d&quot;</span><br><br>    <span class="hljs-title">Path</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> myPath</span><br>        <span class="hljs-attribute">startX</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">startY</span>: <span class="hljs-number">100</span><br><br>        <span class="hljs-title">PathCurve</span> &#123; <span class="hljs-attribute">x</span>: <span class="hljs-number">50</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">50</span> &#125;<br>        <span class="hljs-title">PathCurve</span> &#123; <span class="hljs-attribute">x</span>: <span class="hljs-number">100</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">150</span> &#125;<br>        <span class="hljs-title">PathCurve</span> &#123; <span class="hljs-attribute">x</span>: <span class="hljs-number">150</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">50</span> &#125;<br>        <span class="hljs-title">PathCurve</span> &#123; <span class="hljs-attribute">x</span>: <span class="hljs-number">200</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">100</span> &#125;<br>    &#125;<br><br>    <span class="hljs-attribute">onPaint</span>: &#123;<br>        context.lineWidth = <span class="hljs-number">1</span><br>        context.strokeStyle = <span class="hljs-string">&quot;black&quot;</span><br>        context.path = myPath<br>        context.stroke()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240614160021.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h4 id="SVG">SVG</h4>
<p><code>PathSvg</code> 允许使用 SVG 格式的路径数据来定义路径.</p>
<p>通过指定 <code>path</code> 属性, 可以将 SVG 格式的路径数据直接导入到 QML 中, 实现复杂的路径形状、曲线和闭合效果.</p>
<p>例如:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Canvas</span> &#123;<br>    <span class="hljs-attribute">id:</span><span class="hljs-string"> root</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">200</span><br>    <span class="hljs-attribute">contextType</span>: <span class="hljs-string">&quot;2d&quot;</span><br><br>    <span class="hljs-title">Path</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> myPath</span><br>        <span class="hljs-attribute">startX</span>: <span class="hljs-number">50</span>; <span class="hljs-attribute">startY</span>: <span class="hljs-number">50</span><br>        <span class="hljs-title">PathSvg</span> &#123; <span class="hljs-attribute">path</span>: <span class="hljs-string">&quot;L 150 50 L 100 150 z&quot;</span> &#125;<br>    &#125;<br><br>    <span class="hljs-attribute">onPaint</span>: &#123;<br>        context.lineWidth = <span class="hljs-number">1</span><br>        context.strokeStyle = <span class="hljs-string">&quot;black&quot;</span><br>        context.path = myPath<br>        context.stroke()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>其中:</p>
<ul>
<li><code>L 150 50</code>: 是一个路径命令, 表示从当前点画一条直线到指定的坐标点 (150, 50), “L” 代表直线命令, 后面跟着目标点的坐标.</li>
<li><code>L 100 150</code>: 同样是一个直线命令, 表示从上一个点 (150, 50) 画一条直线到指定的坐标点 (100, 150).</li>
<li><code>z</code>: 闭合路径命令, 表示将当前点与起始点连接, 形成闭合路径.</li>
</ul>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240614160458.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h3 id="复杂路径">复杂路径</h3>
<p>复杂路径是将多个基本路径组合在一起, 从而创建出更加复杂和多样化的路径形状.</p>
<p>例如:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Canvas</span> &#123;<br>    <span class="hljs-attribute">id:</span><span class="hljs-string"> root</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">200</span><br>    <span class="hljs-attribute">contextType</span>: <span class="hljs-string">&quot;2d&quot;</span><br><br>    <span class="hljs-title">Path</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> myPath</span><br>        <span class="hljs-attribute">startX</span>: <span class="hljs-number">0</span><br>        <span class="hljs-attribute">startY</span>: <span class="hljs-number">100</span><br><br>        <span class="hljs-title">PathLine</span> &#123; <span class="hljs-attribute">x</span>: <span class="hljs-number">25</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">100</span> &#125;<br>        <span class="hljs-title">PathArc</span> &#123;<br>            <span class="hljs-attribute">x</span>: <span class="hljs-number">75</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">100</span><br>            <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">25</span>; <span class="hljs-attribute">radiusY</span>: <span class="hljs-number">25</span><br>        &#125;<br>        <span class="hljs-title">PathLine</span> &#123; <span class="hljs-attribute">x</span>: <span class="hljs-number">125</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">100</span> &#125;<br>        <span class="hljs-title">PathArc</span> &#123;<br>            <span class="hljs-attribute">x</span>: <span class="hljs-number">175</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">100</span><br>            <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">25</span>; <span class="hljs-attribute">radiusY</span>: <span class="hljs-number">25</span><br>        &#125;<br>        <span class="hljs-title">PathLine</span> &#123; <span class="hljs-attribute">x</span>: <span class="hljs-number">200</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">100</span> &#125;<br>    &#125;<br><br>    <span class="hljs-attribute">onPaint</span>: &#123;<br>        context.lineWidth = <span class="hljs-number">1</span><br>        context.strokeStyle = <span class="hljs-string">&quot;black&quot;</span><br>        context.path = myPath<br>        context.stroke()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240614161143.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h3 id="移动路径位置">移动路径位置</h3>
<p>默认情况下当前路径元素的起点是上一个路径元素的终点, 如果想要分隔路径元素, 就需要使用 <code>PathMove</code>.</p>
<p>例如, 想要实现一个简单的笑脸:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">Canvas</span> &#123;<br>    <span class="hljs-attribute">id:</span><span class="hljs-string"> root</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">200</span><br>    <span class="hljs-attribute">contextType</span>: <span class="hljs-string">&quot;2d&quot;</span><br><br>    <span class="hljs-title">Path</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> myPath</span><br><br>        <span class="hljs-comment">// 左眼</span><br>        <span class="hljs-attribute">startX</span>: <span class="hljs-number">25</span>; <span class="hljs-attribute">startY</span>: <span class="hljs-number">100</span><br>        <span class="hljs-title">PathQuad</span> &#123;<br>            <span class="hljs-attribute">x</span>: <span class="hljs-number">75</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">100</span><br>            <span class="hljs-attribute">controlX</span>: <span class="hljs-number">50</span>; <span class="hljs-attribute">controlY</span>: <span class="hljs-number">50</span><br>        &#125;<br><br>        <span class="hljs-comment">// 右眼</span><br>        <span class="hljs-title">PathMove</span> &#123; <span class="hljs-attribute">x</span>: <span class="hljs-number">125</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">100</span> &#125;<br>        <span class="hljs-title">PathQuad</span> &#123;<br>            <span class="hljs-attribute">x</span>: <span class="hljs-number">175</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">100</span><br>            <span class="hljs-attribute">controlX</span>: <span class="hljs-number">150</span>; <span class="hljs-attribute">controlY</span>: <span class="hljs-number">50</span><br>        &#125;<br><br>        <span class="hljs-comment">// 嘴巴</span><br>        <span class="hljs-title">PathMove</span> &#123; <span class="hljs-attribute">x</span>: <span class="hljs-number">90</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">150</span> &#125;<br>        <span class="hljs-title">PathQuad</span> &#123;<br>            <span class="hljs-attribute">x</span>: <span class="hljs-number">110</span>; <span class="hljs-attribute">y</span>: <span class="hljs-number">150</span><br>            <span class="hljs-attribute">controlX</span>: <span class="hljs-number">100</span>; <span class="hljs-attribute">controlY</span>: <span class="hljs-number">175</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-attribute">onPaint</span>: &#123;<br>        context.lineWidth = <span class="hljs-number">1</span><br>        context.strokeStyle = <span class="hljs-string">&quot;black&quot;</span><br>        context.path = myPath<br>        context.stroke()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240614161424.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h2 id="PathView">PathView</h2>
<p><code>PathView</code> 元素是 Qt Quick 中提供的最灵活的视图, 但也是最复杂的, 它允许我们基于路径 <code>Path</code> 创建动态且多样化的视图效果, 这条路径可以是直线、曲线, 甚至是任意复杂的形状.</p>
<p>使用 <code>PathView</code> 时, 你必须定义一个委托和一条路径. 除此之外, <code>PathView</code> 本身还可以通过一系列属性进行自定义. 最常见的属性是 <strong><code>pathItemCount</code> (控制同时可见项的数量)</strong> 和高亮区间控制属性 <code>preferredHighlightBegin</code>、<code>preferredHighlightEnd</code> 和 <code>highlightRangeMode</code> (<strong>确定当前项在 <code>PathView</code> 中的起始位置和结束位置</strong>, 取值范围为 [0.0, 1.0], 其中 0.0 表示路径起点, 1.0 表示路径终点).</p>
<p><code>PathView</code> 有一个 <code>path</code> 属性, <strong><code>path</code> 属性需要一个 <code>path</code> 元素, 该元素定义了 <code>PathView</code> 中委托的滚动路径</strong>. 路径是使用 <code>startX</code> 和 <code>startY</code> 属性与 <code>PathLine</code>、<code>PathQuad</code> 和 <code>PathCubic</code> 等路径元素组合定义的, 这些元素连接在一起形成一个二维路径.</p>
<p><strong><code>highlightRangeMode</code> 属性控制视图中高亮的显示</strong>, 可选值有:</p>
<ul>
<li><code>PathView.NoHighlightRange</code>: 不应用范围, 高亮可在视图中自由移动.</li>
<li><code>PathView.ApplyRange</code>: 视图尝试将高亮保持在范围内, 但不强制修改当前项.</li>
<li><code>PathView.StrictlyEnforceRange</code>: 高亮永远在范围之内, 这意味着如果键盘或鼠标操作导致高亮移出范围之外, 则当前项将发生改变, 以确保高亮可见.</li>
</ul>
<p>如果希望当前项永远位于路径的中间, 则可以设置 <code>highlightRangeMode</code> 为 <code>PathView.StrictlyEnforceRange</code>, 并将<br>
<code>preferredHighlightBegin</code> 和 <code>preferredHighlightEnd</code> 设置为 0.5.</p>
<p>例如:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-comment">// MyImages.qml</span><br><br><span class="hljs-keyword">import</span> QtQuick<br><br><span class="hljs-title">ListModel</span> &#123;<br>    <span class="hljs-title">ListElement</span> &#123;<br>        <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Image0&quot;</span><br>        <span class="hljs-attribute">number</span>: <span class="hljs-string">&quot;10001&quot;</span><br>        <span class="hljs-attribute">position</span>: <span class="hljs-string">&quot;CEO&quot;</span><br>        <span class="hljs-attribute">portrait</span>: <span class="hljs-string">&quot;qrc:/1.jpg&quot;</span><br>    &#125;<br>    <span class="hljs-title">ListElement</span> &#123;<br>        <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Image1&quot;</span><br>        <span class="hljs-attribute">number</span>: <span class="hljs-string">&quot;10002&quot;</span><br>        <span class="hljs-attribute">position</span>: <span class="hljs-string">&quot;CTO&quot;</span><br>        <span class="hljs-attribute">portrait</span>: <span class="hljs-string">&quot;qrc:/2.jpg&quot;</span><br>    &#125;<br>    <span class="hljs-title">ListElement</span> &#123;<br>        <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Image2&quot;</span><br>        <span class="hljs-attribute">number</span>: <span class="hljs-string">&quot;10003&quot;</span><br>        <span class="hljs-attribute">position</span>: <span class="hljs-string">&quot;CTO&quot;</span><br>        <span class="hljs-attribute">portrait</span>: <span class="hljs-string">&quot;qrc:/3.jpg&quot;</span><br>    &#125;<br>    <span class="hljs-title">ListElement</span> &#123;<br>        <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Image3&quot;</span><br>        <span class="hljs-attribute">number</span>: <span class="hljs-string">&quot;10004&quot;</span><br>        <span class="hljs-attribute">position</span>: <span class="hljs-string">&quot;COO&quot;</span><br>        <span class="hljs-attribute">portrait</span>: <span class="hljs-string">&quot;qrc:/4.jpg&quot;</span><br>    &#125;<br>    <span class="hljs-title">ListElement</span> &#123;<br>        <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;Image4&quot;</span><br>        <span class="hljs-attribute">number</span>: <span class="hljs-string">&quot;10005&quot;</span><br>        <span class="hljs-attribute">position</span>: <span class="hljs-string">&quot;COO&quot;</span><br>        <span class="hljs-attribute">portrait</span>: <span class="hljs-string">&quot;qrc:/5.jpg&quot;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-comment">// Main.qml</span><br><br><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> QtQuick.Controls<br><span class="hljs-keyword">import</span> QtQuick.Layouts<br><br><span class="hljs-title">ApplicationWindow</span> &#123;<br>    <span class="hljs-attribute">visible</span>: <span class="hljs-literal">true</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">680</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">500</span><br>    <span class="hljs-attribute">title</span>: qsTr(<span class="hljs-string">&quot;Hello World&quot;</span>)<br><br>    <span class="hljs-title">Rectangle</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">600</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">400</span><br><br>        <span class="hljs-title">Component</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> delegateComponent</span><br>            <span class="hljs-title">Column</span> &#123;<br>                <span class="hljs-attribute">id:</span><span class="hljs-string"> wrapper</span><br>                <span class="hljs-attribute">opacity</span>: PathView.isCurrentItem ? <span class="hljs-number">1</span> : <span class="hljs-number">0.5</span><br>                <span class="hljs-title">Image</span> &#123;<br>                    <span class="hljs-attribute">anchors.horizontalCenter</span>: nameText.horizontalCenter<br>                    <span class="hljs-attribute">width</span>: <span class="hljs-number">64</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">64</span><br>                    <span class="hljs-attribute">source</span>: portrait<br>                &#125;<br>                <span class="hljs-title">Text</span> &#123;<br>                    <span class="hljs-attribute">id:</span><span class="hljs-string"> nameText</span><br>                    <span class="hljs-attribute">text</span>: name<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-title">PathView</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> view</span><br>            <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>            <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br>            <span class="hljs-attribute">model</span>: <span class="hljs-title">MyImages</span> &#123;&#125;<br>            <span class="hljs-attribute">delegate</span>: delegateComponent<br><br>            <span class="hljs-attribute">highlightRangeMode</span>: PathView.StrictlyEnforceRange<br>            <span class="hljs-attribute">preferredHighlightBegin</span>: <span class="hljs-number">0.5</span><br>            <span class="hljs-attribute">preferredHighlightEnd</span>: <span class="hljs-number">0.5</span><br><br>            <span class="hljs-attribute">path</span>: <span class="hljs-title">Path</span> &#123;<br>                <span class="hljs-attribute">startX</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">startY</span>: view.height/<span class="hljs-number">2</span><br>                <span class="hljs-title">PathLine</span> &#123; <span class="hljs-attribute">x</span>: view.width; <span class="hljs-attribute">y</span>: view.height/<span class="hljs-number">2</span> &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240608123219.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h3 id="路径属性">路径属性</h3>
<p>上例中所有图片都是沿水平方向移动, 并且它们的大小和角度都一样, 这样的界面不够生动. 此时, 可以使用 <code>PathAttribute</code> 元素来为每个图片添加不同的属性值.</p>
<p><strong><code>PathAttribute</code> 元素允许为路径上的各个点指定属性</strong>, 这些属性由 <code>name</code> 和 <code>value</code> 组成, 作为附加属性提供给委托, 可通过 <code>PathView.&lt;name&gt;</code> 的形式访问.</p>
<p>在使用 <code>PathAttribute</code> 时, 可以将其放置在路径元素之前或之后. 当放置在路径元素之前时, 它指定了该路径元素起始时的属性值; 当放置在路径元素之后时, 则指定了该路径元素终止时的属性值; 而路径元素上其他点的属性值, <code>Path</code> 会根据起始和终止值自动进行插值计算.</p>
<p>例如:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> QtQuick.Controls<br><span class="hljs-keyword">import</span> QtQuick.Layouts<br><br><span class="hljs-title">ApplicationWindow</span> &#123;<br>    <span class="hljs-attribute">visible</span>: <span class="hljs-literal">true</span><br>    <span class="hljs-attribute">width</span>: app.width<br>    <span class="hljs-attribute">height</span>: app.height<br>    <span class="hljs-attribute">title</span>: qsTr(<span class="hljs-string">&quot;Hello World&quot;</span>)<br><br>    <span class="hljs-title">Rectangle</span> &#123;<br>        <span class="hljs-attribute">id:</span><span class="hljs-string"> app</span><br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">1000</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">800</span><br><br>        <span class="hljs-keyword">property</span><span class="hljs-string"> int itemCount</span>: <span class="hljs-number">5</span><br>        <span class="hljs-keyword">property</span><span class="hljs-string"> size itemSize</span>: Qt.size(<span class="hljs-number">200</span>, <span class="hljs-number">250</span>)<br><br>        <span class="hljs-title">Component</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> photoComponent</span><br>            <span class="hljs-title">Image</span> &#123;<br>                <span class="hljs-attribute">id:</span><span class="hljs-string"> wrapper</span><br>                <span class="hljs-attribute">width</span>: app.itemSize.width<br>                <span class="hljs-attribute">height</span>: app.itemSize.height<br>                <span class="hljs-attribute">antialiasing</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// 启用抗锯齿，否则旋转后有锯齿</span><br>                <span class="hljs-attribute">visible</span>: PathView.onPath<br>                <span class="hljs-attribute">source</span>: model.portrait<br><br>                <span class="hljs-comment">// 使用附加属性设置 z-order、缩放比、旋转角度</span><br>                <span class="hljs-attribute">z</span>: PathView.itemZ<br>                <span class="hljs-attribute">scale</span>: PathView.itemScale<br>                <span class="hljs-attribute">transform</span>: <span class="hljs-title">Rotation</span> &#123;<br>                    <span class="hljs-attribute">origin.x</span>: wrapper.width / <span class="hljs-number">2.0</span><br>                    <span class="hljs-attribute">origin.y</span>: wrapper.height / <span class="hljs-number">2.0</span><br>                    <span class="hljs-title">axis</span> &#123; <span class="hljs-attribute">x</span>:<span class="hljs-number">0</span>; <span class="hljs-attribute">y</span>:<span class="hljs-number">1</span>; <span class="hljs-attribute">z</span>:<span class="hljs-number">0</span> &#125;<br>                    <span class="hljs-attribute">angle</span>: wrapper.PathView.itemAngle<br>                &#125;<br><br>                <span class="hljs-comment">// 点击鼠标时，切换当前项</span><br>                <span class="hljs-title">MouseArea</span> &#123;<br>                    <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>                    <span class="hljs-attribute">onClicked</span>: &#123;<br>                        wrapper.PathView.view.currentIndex = model.index<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-title">PathView</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> pathView</span><br>            <span class="hljs-attribute">anchors.centerIn</span>: <span class="hljs-built_in">parent</span><br>            <span class="hljs-attribute">width</span>: app.itemCount * app.itemSize.width * <span class="hljs-number">0.6</span><br>            <span class="hljs-attribute">height</span>: <span class="hljs-built_in">parent</span>.height<br><br>            <span class="hljs-attribute">model</span>: <span class="hljs-title">MyImages</span> &#123;&#125;<br>            <span class="hljs-attribute">delegate</span>: photoComponent<br><br>            <span class="hljs-attribute">interactive</span>: <span class="hljs-literal">true</span><br>            <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br><br>            <span class="hljs-attribute">pathItemCount</span>: app.itemCount<br>            <span class="hljs-attribute">preferredHighlightBegin</span>: <span class="hljs-number">0.5</span><br>            <span class="hljs-attribute">preferredHighlightEnd</span>: <span class="hljs-number">0.5</span><br><br>            <span class="hljs-attribute">path</span>: <span class="hljs-title">Path</span> &#123;<br>                <span class="hljs-attribute">id:</span><span class="hljs-string"> path</span><br><br>                <span class="hljs-attribute">startX</span>: <span class="hljs-number">0</span><br>                <span class="hljs-attribute">startY</span>: pathView.height / <span class="hljs-number">2.0</span><br><br>                <span class="hljs-comment">// 起点处元素的属性</span><br>                <span class="hljs-title">PathAttribute</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;itemZ&quot;</span>; <span class="hljs-attribute">value</span>: <span class="hljs-number">0</span> &#125;<br>                <span class="hljs-title">PathAttribute</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;itemScale&quot;</span>; <span class="hljs-attribute">value</span>: <span class="hljs-number">0.7</span> &#125;<br>                <span class="hljs-title">PathAttribute</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;itemAngle&quot;</span>; <span class="hljs-attribute">value</span>: <span class="hljs-number">60</span> &#125;<br><br>                <span class="hljs-title">PathLine</span> &#123; <span class="hljs-attribute">x</span>: pathView.width / <span class="hljs-number">2.0</span>; <span class="hljs-attribute">y</span>: path.startY &#125;<br><br>                <span class="hljs-comment">// 路径中间点处元素的属性</span><br>                <span class="hljs-title">PathAttribute</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;itemZ&quot;</span>; <span class="hljs-attribute">value</span>: <span class="hljs-number">100</span> &#125;<br>                <span class="hljs-title">PathAttribute</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;itemScale&quot;</span>; <span class="hljs-attribute">value</span>: <span class="hljs-number">1</span> &#125;<br>                <span class="hljs-title">PathAttribute</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;itemAngle&quot;</span>; <span class="hljs-attribute">value</span>: <span class="hljs-number">0</span> &#125;<br><br>                <span class="hljs-title">PathLine</span> &#123; <span class="hljs-attribute">x</span>: pathView.width; <span class="hljs-attribute">y</span>: path.startY &#125;<br><br>                <span class="hljs-comment">// 路径终点处元素的属性</span><br>                <span class="hljs-title">PathAttribute</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;itemZ&quot;</span>; <span class="hljs-attribute">value</span>: <span class="hljs-number">0</span> &#125;<br>                <span class="hljs-title">PathAttribute</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;itemScale&quot;</span>; <span class="hljs-attribute">value</span>: <span class="hljs-number">0.7</span> &#125;<br>                <span class="hljs-title">PathAttribute</span> &#123; <span class="hljs-attribute">name</span>: <span class="hljs-string">&quot;itemAngle&quot;</span>; <span class="hljs-attribute">value</span>: <span class="hljs-number">-60</span> &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>在上述代码中, 我们设置了两个 <code>PathLine</code> 和三组 <code>PathAttribute</code>, 通过它们, 我们可以实现委托在界面左侧、中间、右侧时具有不同的样式:</p>
<ul>
<li>第一组 <code>PathAttribute</code>: 指定了路径起点处元素的属性, <code>itemZ</code> 指定 z-order 为 0, <code>itemScale</code> 指定缩放比为 0.7, <code>itemAngle</code> 指定旋转角度为 60 度.</li>
<li>第二组 <code>PathAttribute</code>: 指定路径中间点处元素的属性, <code>itemZ</code> 指定 z-order 为 100, <code>itemScale</code> 指定缩放比为 1, <code>itemAngle</code> 指定旋转角度为 0 度.</li>
<li>第三组 <code>PathAttribute</code>: 指定路径终点处元素的属性, <code>itemZ</code> 指定 z-order 为 0, <code>itemScale</code> 指定缩放比为 0.7, <code>itemAngle</code> 指定旋转角度为 -60 度.</li>
</ul>
<p>此时, 从路径起点到中间, z-order 会越来越大、缩放比会越来越大、旋转角度会越来越小; 从路径中间到路径终点, z-order 会越来越小、缩放比会越来越小、旋转角度会越来越大.</p>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240608125613.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h3 id="项目数占比">项目数占比</h3>
<p>通常情况下, <code>PathView</code> 中的项目将沿着路径均匀地分布. 如果要<strong>调整某个路径元素上项目数的占比</strong>, 则可以利用 <code>PathPercent</code> 元素, 将路径上的一些项目聚集在一起, 或者将它们分散到路径的其他位置.<br>
<code>PathPercent</code> 具有一个 <code>value</code> 属性, 取值范围为 [0.0, 1.0]. 将 <code>PathPercent</code> 放置在路径元素之后, 以指定该部分路径上的项目数量占整个路径上所有项目数量的比例.</p>
<p>另外, 在使用 <code>PathPercent</code> 时, 应确保后一个 <code>PathPercent</code> 的 <code>value</code> 值始终大于前一个 <code>PathPercent</code> 的 <code>value</code> 值. 如果某一路径元素介于两个 <code>PathPercent</code> 之间, 则该路径元素上的项目数占比等于后一个 <code>PathPercent</code> 的 <code>value</code> 与前一个 <code>PathPercent</code> 的 <code>value</code> 之差.</p>
<p>对之前的代码进行修改:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-keyword">import</span> QtQuick<br><span class="hljs-keyword">import</span> QtQuick.Controls<br><span class="hljs-keyword">import</span> QtQuick.Layouts<br><br><span class="hljs-title">ApplicationWindow</span> &#123;<br>    <span class="hljs-attribute">visible</span>: <span class="hljs-literal">true</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">680</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">500</span><br>    <span class="hljs-attribute">title</span>: qsTr(<span class="hljs-string">&quot;Hello World&quot;</span>)<br><br>    <span class="hljs-title">Rectangle</span> &#123;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">600</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">400</span><br><br>        <span class="hljs-title">Component</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> delegateComponent</span><br>            <span class="hljs-title">Column</span> &#123;<br>                <span class="hljs-attribute">id:</span><span class="hljs-string"> wrapper</span><br>                <span class="hljs-attribute">opacity</span>: PathView.isCurrentItem ? <span class="hljs-number">1</span> : <span class="hljs-number">0.5</span><br>                <span class="hljs-title">Image</span> &#123;<br>                    <span class="hljs-attribute">anchors.horizontalCenter</span>: nameText.horizontalCenter<br>                    <span class="hljs-attribute">width</span>: <span class="hljs-number">64</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">64</span><br>                    <span class="hljs-attribute">source</span>: portrait<br>                &#125;<br>                <span class="hljs-title">Text</span> &#123;<br>                    <span class="hljs-attribute">id:</span><span class="hljs-string"> nameText</span><br>                    <span class="hljs-attribute">text</span>: name<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-title">PathView</span> &#123;<br>            <span class="hljs-attribute">id:</span><span class="hljs-string"> view</span><br>            <span class="hljs-attribute">anchors.fill</span>: <span class="hljs-built_in">parent</span><br>            <span class="hljs-attribute">clip</span>: <span class="hljs-literal">true</span><br>            <span class="hljs-attribute">model</span>: <span class="hljs-title">MyImages</span> &#123;&#125;<br>            <span class="hljs-attribute">delegate</span>: delegateComponent<br><br>            <span class="hljs-attribute">highlightRangeMode</span>: PathView.StrictlyEnforceRange<br>            <span class="hljs-attribute">preferredHighlightBegin</span>: <span class="hljs-number">0.5</span><br>            <span class="hljs-attribute">preferredHighlightEnd</span>: <span class="hljs-number">0.5</span><br><br>            <span class="hljs-attribute">path</span>: <span class="hljs-title">Path</span> &#123;<br>                <span class="hljs-attribute">startX</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">startY</span>: view.height/<span class="hljs-number">2</span><br>                <span class="hljs-title">PathLine</span> &#123; <span class="hljs-attribute">x</span>: view.width/<span class="hljs-number">3</span>; <span class="hljs-attribute">y</span>: view.height/<span class="hljs-number">2</span> &#125;<br>                <span class="hljs-title">PathPercent</span> &#123; <span class="hljs-attribute">value</span>: <span class="hljs-number">0.2</span> &#125;<br>                <span class="hljs-title">PathLine</span> &#123; <span class="hljs-attribute">x</span>: view.width * <span class="hljs-number">2</span>/<span class="hljs-number">3</span>; <span class="hljs-attribute">y</span>: view.height/<span class="hljs-number">2</span> &#125;<br>                <span class="hljs-title">PathPercent</span> &#123; <span class="hljs-attribute">value</span>: <span class="hljs-number">0.8</span> &#125;<br>                <span class="hljs-title">PathLine</span> &#123; <span class="hljs-attribute">x</span>: view.width; <span class="hljs-attribute">y</span>: view.height/<span class="hljs-number">2</span> &#125;<br>                <span class="hljs-title">PathPercent</span> &#123; <span class="hljs-attribute">value</span>: <span class="hljs-number">1</span> &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如下图所示:<br>
<img src="/img/Pictures/20240608131240.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h2 id="Reference">Reference</h2>
<section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>Qt QML Book - Concept: <a target="_blank" rel="noopener" href="https://www.qt.io/product/qt6/qml-book/ch07-modelview-concept">https://www.qt.io/product/qt6/qml-book/ch07-modelview-concept</a>
<a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>Qt QML Book - Basic Models: <a target="_blank" rel="noopener" href="https://www.qt.io/product/qt6/qml-book/ch07-modelview-basic-models">https://www.qt.io/product/qt6/qml-book/ch07-modelview-basic-models</a>
<a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>Qt QML Book - Dynamic Views: <a target="_blank" rel="noopener" href="https://www.qt.io/product/qt6/qml-book/ch07-modelview-dynamic-views">https://www.qt.io/product/qt6/qml-book/ch07-modelview-dynamic-views</a>
<a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>Qt QML Book - Delegate: <a target="_blank" rel="noopener" href="https://www.qt.io/product/qt6/qml-book/ch07-modelview-delegate">https://www.qt.io/product/qt6/qml-book/ch07-modelview-delegate</a>
<a href="#fnref:4" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>QML 模型视图: <a target="_blank" rel="noopener" href="https://waleon.blog.csdn.net/article/details/135463643">https://waleon.blog.csdn.net/article/details/135463643</a>
<a href="#fnref:5" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>QML Repeater 重复器: <a target="_blank" rel="noopener" href="https://waleon.blog.csdn.net/article/details/135519280">https://waleon.blog.csdn.net/article/details/135519280</a>
<a href="#fnref:6" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:7" class="footnote-text"><span>QML ListView 列表视图: <a target="_blank" rel="noopener" href="https://waleon.blog.csdn.net/article/details/135993818">https://waleon.blog.csdn.net/article/details/135993818</a>
<a href="#fnref:7" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:8" class="footnote-text"><span>QML GridView 网格视图: <a target="_blank" rel="noopener" href="https://waleon.blog.csdn.net/article/details/136686880">https://waleon.blog.csdn.net/article/details/136686880</a>
<a href="#fnref:8" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:9" class="footnote-text"><span>QML PathView 路径视图: <a target="_blank" rel="noopener" href="https://waleon.blog.csdn.net/article/details/137822550">https://waleon.blog.csdn.net/article/details/137822550</a>
<a href="#fnref:9" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:10" class="footnote-text"><span>QML Path 路径: <a target="_blank" rel="noopener" href="https://waleon.blog.csdn.net/article/details/137511759">https://waleon.blog.csdn.net/article/details/137511759</a>
<a href="#fnref:10" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E7%AC%94%E8%AE%B0/" class="category-chain-item">笔记</a>
  
  
    <span>></span>
    
  <a href="/categories/%E7%AC%94%E8%AE%B0/QT/" class="category-chain-item">QT</a>
  
  
    <span>></span>
    
  <a href="/categories/%E7%AC%94%E8%AE%B0/QT/QML/" class="category-chain-item">QML</a>
  
  

  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/QT/" class="print-no-link">#QT</a>
      
        <a href="/tags/QML/" class="print-no-link">#QML</a>
      
    </div>
  
</div>


              

              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/07/06/Linux/Linux%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/" title="Linux 文件操作">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Linux 文件操作</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/07/04/QT/QML/Imagine%E6%A0%B7%E5%BC%8F/" title="QML Imagine 样式">
                        <span class="hidden-mobile">QML Imagine 样式</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
